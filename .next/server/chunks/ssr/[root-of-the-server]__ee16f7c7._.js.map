{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/data.ts"],"sourcesContent":["/**\n * @fileOverview Datos de prueba para la aplicación.\n * Este archivo contiene datos de ejemplo para campañas y contactos,\n * utilizados para poblar la interfaz de usuario hasta que se conecte una base de datos real.\n */\nimport type { Block } from '@/lib/template-utils';\n\n/**\n * Los datos de ejemplo han sido eliminados para simular un entorno real.\n * La aplicación ahora comenzará con datos vacíos.\n */\nexport const campaigns: any[] = [];\n\n/**\n * Los datos de las plantillas ahora se gestionan en la base de datos.\n * Este array se ha eliminado para evitar conflictos.\n */\n\n/**\n * Los datos de ejemplo han sido eliminados para simular un entorno real.\n */\nexport const contacts: any[] = [];\n\n/**\n * Los datos de ejemplo han sido eliminados para simular un entorno real.\n */\nexport const surveys: any[] = [];\n\n/**\n * Los datos de ejemplo han sido eliminados para simular un entorno real.\n */\nexport const events: any[] = [];\n\n/**\n * Plantillas de certificados de ejemplo (mapeado por event.id).\n * El contenido es una imagen PNG codificada en base64.\n * Los datos de ejemplo han sido eliminados.\n */\nexport const certificateTemplates: Record<string, string> = {};\n\n/**\n * Datos de ejemplo para los remitentes gestionados por TI.\n */\nexport const managedSenders = [\n  { name: 'Soporte Técnico', email: 'soporte@emailcraft.com' },\n  { name: 'Notificaciones del Sistema', email: 'noreply@emailcraft.com' },\n  { name: 'Comunicaciones Internas', email: 'comms@emailcraft.com' },\n];\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;;;;AAOM,MAAM,YAAmB,EAAE;AAU3B,MAAM,WAAkB,EAAE;AAK1B,MAAM,UAAiB,EAAE;AAKzB,MAAM,SAAgB,EAAE;AAOxB,MAAM,uBAA+C,CAAC;AAKtD,MAAM,iBAAiB;IAC5B;QAAE,MAAM;QAAmB,OAAO;IAAyB;IAC3D;QAAE,MAAM;QAA8B,OAAO;IAAyB;IACtE;QAAE,MAAM;QAA2B,OAAO;IAAuB;CAClE","debugId":null}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/permissions.ts"],"sourcesContent":["\n/**\n * @fileoverview Define los roles y permisos para el Control de Acceso Basado en Roles (RBAC).\n * Este archivo centraliza la lógica de permisos para simular un sistema RBAC.\n * En una aplicación real, esta información provendría de una base de datos.\n */\n\nexport const ROLES = {\n  IT: 'it',\n  MARKETING: 'marketing',\n  HR: 'hr',\n} as const;\n\nexport type Role = (typeof ROLES)[keyof typeof ROLES];\n\n// Define los permisos disponibles en la aplicación.\nexport const APP_PERMISSIONS = {\n  // General\n  VIEW_DASHBOARD: 'dashboard:view',\n  // Envío\n  SEND_CAMPAIGN: 'campaign:send',\n  VIEW_CAMPAIGN_MONITOR: 'campaign:view',\n  VIEW_MAILBOX: 'mailbox:view',\n  // Gestión\n  VIEW_CONTACTS: 'contacts:view',\n  VIEW_TEMPLATES: 'templates:view',\n  VIEW_EVENTS: 'events:view',\n  VIEW_SURVEYS: 'surveys:view',\n  // Avanzado: Página de Rendimiento\n  VIEW_PERFORMANCE: 'performance:view', // Acceso general a la página\n  GENERATE_REPORTS: 'performance:generate_report',\n  VIEW_PERFORMANCE_MAIN_METRICS: 'performance:view_main_metrics',\n  VIEW_PERFORMANCE_CHARTS: 'performance:view_charts',\n  VIEW_PERFORMANCE_FUNNEL: 'performance:view_funnel',\n  VIEW_PERFORMANCE_SEGMENTS: 'performance:view_segments',\n  VIEW_PERFORMANCE_PREDICTIONS: 'performance:view_predictions',\n  VIEW_PERFORMANCE_ERRORS: 'performance:view_errors',\n  VIEW_PERFORMANCE_SYSTEM: 'performance:view_system',\n  // Ajustes\n  VIEW_SETTINGS: 'settings:view',\n} as const;\n\nexport type Permission = (typeof APP_PERMISSIONS)[keyof typeof APP_PERMISSIONS];\n\n// Asigna permisos iniciales a cada rol. Esta será la configuración por defecto.\nexport const ROLE_PERMISSIONS: Record<Role, Permission[]> = {\n  [ROLES.IT]: Object.values(APP_PERMISSIONS), // TI tiene todos los permisos\n  [ROLES.MARKETING]: [\n    APP_PERMISSIONS.VIEW_DASHBOARD,\n    APP_PERMISSIONS.SEND_CAMPAIGN,\n    APP_PERMISSIONS.VIEW_CAMPAIGN_MONITOR,\n    APP_PERMISSIONS.VIEW_MAILBOX,\n    APP_PERMISSIONS.VIEW_CONTACTS,\n    APP_PERMISSIONS.VIEW_TEMPLATES,\n    APP_PERMISSIONS.VIEW_SURVEYS,\n    APP_PERMISSIONS.VIEW_PERFORMANCE, // Acceso a la página\n    APP_PERMISSIONS.VIEW_PERFORMANCE_MAIN_METRICS,\n    APP_PERMISSIONS.VIEW_PERFORMANCE_CHARTS,\n    APP_PERMISSIONS.VIEW_PERFORMANCE_FUNNEL,\n    APP_PERMISSIONS.VIEW_PERFORMANCE_SEGMENTS,\n    APP_PERMISSIONS.VIEW_PERFORMANCE_PREDICTIONS,\n  ],\n  [ROLES.HR]: [\n    APP_PERMISSIONS.VIEW_DASHBOARD,\n    APP_PERMISSIONS.SEND_CAMPAIGN,\n    APP_PERMISSIONS.VIEW_CAMPAIGN_MONITOR,\n    APP_PERMISSIONS.VIEW_MAILBOX,\n    APP_PERMISSIONS.VIEW_CONTACTS,\n    APP_PERMISSIONS.VIEW_EVENTS,\n  ],\n};\n\n/**\n * Comprueba si un rol tiene un permiso específico.\n * @param role El rol del usuario.\n * @param permission El permiso a comprobar.\n * @returns `true` si el rol tiene el permiso, `false` en caso contrario.\n */\nexport function hasPermission(role: Role | null, permission: Permission): boolean {\n  if (!role) return false;\n  // En una implementación real y dinámica, ROLE_PERMISSIONS se obtendría\n  // de un estado global o contexto que el admin de TI puede modificar.\n  // Por ahora, usamos la configuración estática.\n  return ROLE_PERMISSIONS[role]?.includes(permission) || false;\n}\n"],"names":[],"mappings":"AACA;;;;CAIC;;;;;;AAEM,MAAM,QAAQ;IACnB,IAAI;IACJ,WAAW;IACX,IAAI;AACN;AAKO,MAAM,kBAAkB;IAC7B,UAAU;IACV,gBAAgB;IAChB,QAAQ;IACR,eAAe;IACf,uBAAuB;IACvB,cAAc;IACd,UAAU;IACV,eAAe;IACf,gBAAgB;IAChB,aAAa;IACb,cAAc;IACd,kCAAkC;IAClC,kBAAkB;IAClB,kBAAkB;IAClB,+BAA+B;IAC/B,yBAAyB;IACzB,yBAAyB;IACzB,2BAA2B;IAC3B,8BAA8B;IAC9B,yBAAyB;IACzB,yBAAyB;IACzB,UAAU;IACV,eAAe;AACjB;AAKO,MAAM,mBAA+C;IAC1D,CAAC,MAAM,EAAE,CAAC,EAAE,OAAO,MAAM,CAAC;IAC1B,CAAC,MAAM,SAAS,CAAC,EAAE;QACjB,gBAAgB,cAAc;QAC9B,gBAAgB,aAAa;QAC7B,gBAAgB,qBAAqB;QACrC,gBAAgB,YAAY;QAC5B,gBAAgB,aAAa;QAC7B,gBAAgB,cAAc;QAC9B,gBAAgB,YAAY;QAC5B,gBAAgB,gBAAgB;QAChC,gBAAgB,6BAA6B;QAC7C,gBAAgB,uBAAuB;QACvC,gBAAgB,uBAAuB;QACvC,gBAAgB,yBAAyB;QACzC,gBAAgB,4BAA4B;KAC7C;IACD,CAAC,MAAM,EAAE,CAAC,EAAE;QACV,gBAAgB,cAAc;QAC9B,gBAAgB,aAAa;QAC7B,gBAAgB,qBAAqB;QACrC,gBAAgB,YAAY;QAC5B,gBAAgB,aAAa;QAC7B,gBAAgB,WAAW;KAC5B;AACH;AAQO,SAAS,cAAc,IAAiB,EAAE,UAAsB;IACrE,IAAI,CAAC,MAAM,OAAO;IAClB,uEAAuE;IACvE,qEAAqE;IACrE,+CAA+C;IAC/C,OAAO,gBAAgB,CAAC,KAAK,EAAE,SAAS,eAAe;AACzD","debugId":null}},
    {"offset": {"line": 363, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/actions/send-campaign-action.ts"],"sourcesContent":["\n'use server';\n\nimport 'isomorphic-fetch';\nimport { ClientSecretCredential } from '@azure/identity';\nimport { Client } from '@microsoft/microsoft-graph-client';\nimport { TokenCredentialAuthenticationProvider } from '@microsoft/microsoft-graph-client/authProviders/azureTokenCredentials';\nimport mysql from 'mysql2/promise';\nimport { parse } from 'csv-parse/sync';\nimport * as XLSX from 'xlsx';\nimport { events } from '@/lib/data';\nimport { hasPermission, APP_PERMISSIONS, type Role } from '@/lib/permissions';\n\n/**\n * @fileoverview Acción de servidor para enviar una campaña de correo electrónico.\n * Obtiene destinatarios desde una fuente de datos y los envía por lotes\n * para respetar los límites de la API, utilizando Microsoft Graph.\n */\n\ninterface SendCampaignPayload {\n  subject: string;\n  htmlBody: string;\n  recipientData: {\n    type: 'date' | 'csv' | 'sql' | 'excel' | 'individual';\n    value: string;\n  };\n  senderEmail: string;\n  attachment?: {\n    filename: string;\n    contentType: string;\n    content: string; // base64 content\n  };\n  eventId?: string;\n  role: Role;\n}\n\ninterface Recipient {\n  email: string;\n  name?: string;\n}\n\n/**\n * Obtiene una lista de destinatarios desde la fuente especificada.\n */\nasync function getRecipients(\n  recipientData: SendCampaignPayload['recipientData']\n): Promise<Recipient[]> {\n  const { type, value } = recipientData;\n\n  const findKey = (obj: object, potentialKeys: string[]) => {\n    const key = Object.keys(obj).find(k => potentialKeys.includes(k.toLowerCase()));\n    return key ? obj[key as keyof typeof obj] : undefined;\n  };\n\n  if (type === 'csv') {\n    try {\n      const records = parse(value, {\n        columns: true,\n        skip_empty_lines: true,\n      });\n      if (records.length === 0) return [];\n\n      const emailKey = Object.keys(records[0]).find(k => k.toLowerCase() === 'email');\n      if (!emailKey) throw new Error('La columna \"email\" no se encontró en el archivo CSV.');\n\n      return records.map((record: any) => ({\n        email: record[emailKey],\n        name: findKey(record, ['name', 'nombre', 'fullname', 'nombre completo']),\n      })).filter((r: Recipient) => r.email && r.email.includes('@'));\n    } catch (error) {\n      console.error('Error al procesar el archivo CSV:', error);\n      throw new Error(`Error al procesar el archivo CSV: ${(error as Error).message}`);\n    }\n  }\n\n  if (type === 'excel') {\n    try {\n      const buffer = Buffer.from(value, 'base64');\n      const workbook = XLSX.read(buffer, { type: 'buffer' });\n      const sheetName = workbook.SheetNames[0];\n      const worksheet = workbook.Sheets[sheetName];\n      const jsonData: any[] = XLSX.utils.sheet_to_json(worksheet);\n      if (jsonData.length === 0) return [];\n\n      const emailKey = Object.keys(jsonData[0]).find(key => key.toLowerCase() === 'email');\n      if (!emailKey) throw new Error('La columna \"email\" no se encontró en el archivo Excel.');\n\n      return jsonData.map(row => ({\n        email: row[emailKey],\n        name: findKey(row, ['name', 'nombre', 'fullname', 'nombre completo']),\n      })).filter(r => r.email && typeof r.email === 'string' && r.email.includes('@'));\n    } catch (error) {\n      console.error('Error al procesar el archivo Excel:', error);\n      throw new Error(`Error al procesar el archivo Excel: ${(error as Error).message}`);\n    }\n  }\n\n  if (type === 'individual') {\n    const emails = value.split(/[\\s,;]+/).filter(e => e && e.includes('@'));\n    return emails.map(email => ({ email }));\n  }\n\n  const { MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE, MYSQL_PORT } = process.env;\n  if (!MYSQL_HOST || !MYSQL_USER || !MYSQL_DATABASE) {\n    throw new Error('Faltan las variables de entorno de la base de datos. Por favor, configúralas.');\n  }\n\n  let connection;\n  try {\n    connection = await mysql.createConnection({\n      host: MYSQL_HOST,\n      port: MYSQL_PORT ? parseInt(MYSQL_PORT, 10) : 3306,\n      user: MYSQL_USER,\n      password: MYSQL_PASSWORD,\n      database: MYSQL_DATABASE,\n    });\n\n    let sql_query = '';\n    let params: any[] = [];\n\n    if (type === 'date') {\n      sql_query = `\n          SELECT c.email, c.nombre\n          FROM contactos c\n          JOIN asistentes a ON c.id_contacto = a.id_contacto\n          JOIN eventos e ON a.id_evento = e.id_evento\n          WHERE e.fecha = ?;\n      `;\n      params = [value];\n    } else if (type === 'sql') {\n      sql_query = value;\n      params = [];\n    }\n\n    const [rows] = await connection.execute(sql_query, params);\n    return (rows as Recipient[]).filter(row => row.email);\n  } catch (error) {\n    console.error('Error al conectar o consultar la base de datos:', error);\n    throw new Error('No se pudo obtener los contactos de la base de datos.');\n  } finally {\n    if (connection) await connection.end();\n  }\n}\n\nasync function getGraphClient() {\n    const { GRAPH_CLIENT_ID, GRAPH_TENANT_ID, GRAPH_CLIENT_SECRET } = process.env;\n    if (!GRAPH_CLIENT_ID || !GRAPH_TENANT_ID || !GRAPH_CLIENT_SECRET) {\n        throw new Error('Faltan las variables de entorno de Microsoft Graph. Por favor, configúralas.');\n    }\n    const credential = new ClientSecretCredential(GRAPH_TENANT_ID, GRAPH_CLIENT_ID, GRAPH_CLIENT_SECRET);\n    const authProvider = new TokenCredentialAuthenticationProvider(credential, { scopes: ['https://graph.microsoft.com/.default'] });\n    return Client.initWithMiddleware({ authProvider });\n}\n\nconst delay = (ms: number) => new Promise(res => setTimeout(res, ms));\n\nasync function sendEmailWithRetry(graphClient: Client, message: any, userMail: string, maxRetries = 3) {\n    for (let i = 0; i < maxRetries; i++) {\n        try {\n            await graphClient.api(`/users/${userMail}/sendMail`).post({ message, saveToSentItems: 'true' });\n            return;\n        } catch (error: any) {\n            if (error.statusCode === 429 && i < maxRetries - 1) {\n                const retryAfter = error.responseHeaders?.['retry-after'] || Math.pow(2, i);\n                console.warn(`Throttled por la API de Graph. Reintentando en ${retryAfter} segundos...`);\n                await delay(retryAfter * 1000);\n            } else {\n                throw error;\n            }\n        }\n    }\n    throw new Error(`No se pudo enviar el correo después de ${maxRetries} reintentos.`);\n}\n\nexport async function sendCampaign(payload: SendCampaignPayload) {\n  const { subject, htmlBody, recipientData, attachment, eventId, role, senderEmail } = payload;\n  \n  if (!hasPermission(role, APP_PERMISSIONS.SEND_CAMPAIGN)) {\n    throw new Error('Acceso denegado: No tienes permiso para enviar campañas.');\n  }\n  \n  const batchSize = 50;\n  const emailDelay = 100;\n  const batchDelay = 5;\n\n  const startTime = Date.now();\n\n  if (!senderEmail) {\n    throw new Error('Falta el correo del remitente. Por favor, configúralo.');\n  }\n\n  const recipients = await getRecipients(recipientData);\n  if (recipients.length === 0) {\n    return { success: true, message: `No se encontraron destinatarios. No se enviaron correos.`, stats: { sentCount: 0, failedCount: 0, totalRecipients: 0, duration: 0 } };\n  }\n\n  const event = eventId ? events.find(e => e.id === eventId) : null;\n  const totalRecipients = recipients.length;\n  const graphClient = await getGraphClient();\n  let sentCount = 0;\n  let failedCount = 0;\n\n  const recipientBatches = [];\n  for (let i = 0; i < recipients.length; i += batchSize) {\n    recipientBatches.push(recipients.slice(i, i + batchSize));\n  }\n\n  for (const [index, batch] of recipientBatches.entries()) {\n    for (const contact of batch) {\n        try {\n            let finalHtmlBody = htmlBody;\n            if (contact.name) {\n              finalHtmlBody = finalHtmlBody.replace(/{{contact.name}}/g, contact.name);\n            }\n            if (event) {\n              finalHtmlBody = finalHtmlBody.replace(/{{event.date}}/g, event.date);\n            }\n            finalHtmlBody = finalHtmlBody.replace(/{{contact.name}}/g, '');\n            finalHtmlBody = finalHtmlBody.replace(/{{event.date}}/g, '');\n\n            const message = {\n                subject: subject,\n                body: { contentType: 'HTML', content: finalHtmlBody },\n                toRecipients: [{ emailAddress: { address: contact.email } }],\n                attachments: attachment ? [\n                  {\n                      '@odata.type': '#microsoft.graph.fileAttachment',\n                      name: attachment.filename,\n                      contentType: attachment.contentType,\n                      contentBytes: attachment.content,\n                  }\n                ] : undefined,\n            };\n            \n            await sendEmailWithRetry(graphClient, message, senderEmail);\n            sentCount++;\n        } catch (error) {\n            failedCount++;\n            const errorMessage = (error as any)?.body ? JSON.parse((error as any).body).error.message : (error as Error).message;\n            console.error(`Error al enviar correo a ${contact.email} usando Graph:`, errorMessage);\n        }\n        \n        if(emailDelay > 0) await delay(emailDelay);\n    }\n    \n    if (index < recipientBatches.length - 1) {\n      if(batchDelay > 0) await delay(batchDelay * 1000);\n    }\n  }\n\n  const endTime = Date.now();\n  const duration = (endTime - startTime) / 1000;\n\n  let message = `Envío completado con Microsoft Graph. Enviados: ${sentCount}. Fallidos: ${failedCount}.`;\n  if (failedCount > 0) {\n    message += ' Revisa la consola del servidor para más detalles sobre los errores.';\n  }\n\n  return { success: true, message, stats: { sentCount, failedCount, totalRecipients, duration } };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 639, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/actions/send-test-email-action.ts"],"sourcesContent":["\n'use server';\n\nimport 'isomorphic-fetch';\nimport { ClientSecretCredential } from '@azure/identity';\nimport { Client } from '@microsoft/microsoft-graph-client';\nimport { TokenCredentialAuthenticationProvider } from '@microsoft/microsoft-graph-client/authProviders/azureTokenCredentials';\nimport { format } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport { events } from '@/lib/data';\nimport { hasPermission, APP_PERMISSIONS, type Role } from '@/lib/permissions';\n\n/**\n * @fileoverview Acción de servidor para enviar un único correo de prueba.\n * Incluye verificación de permisos basada en rol.\n */\n\ninterface SendTestEmailPayload {\n  subject: string;\n  htmlBody: string;\n  recipientEmail: string;\n  senderEmail: string;\n  attachment?: {\n    filename: string;\n    contentType: string;\n    content: string; // base64 content\n  };\n  eventId?: string;\n  role: Role;\n}\n\nasync function getGraphClient() {\n    const { GRAPH_CLIENT_ID, GRAPH_TENANT_ID, GRAPH_CLIENT_SECRET } = process.env;\n    if (!GRAPH_CLIENT_ID || !GRAPH_TENANT_ID || !GRAPH_CLIENT_SECRET) {\n        throw new Error('Faltan las variables de entorno de Microsoft Graph. Por favor, configúralas en Ajustes.');\n    }\n    const credential = new ClientSecretCredential(GRAPH_TENANT_ID, GRAPH_CLIENT_ID, GRAPH_CLIENT_SECRET);\n    const authProvider = new TokenCredentialAuthenticationProvider(credential, { scopes: ['https://graph.microsoft.com/.default'] });\n    return Client.initWithMiddleware({ authProvider });\n}\n\nexport async function sendTestEmailAction(payload: SendTestEmailPayload): Promise<{ success: boolean }> {\n  const { subject, htmlBody, recipientEmail, senderEmail, attachment, eventId, role } = payload;\n  \n  if (!hasPermission(role, APP_PERMISSIONS.SEND_CAMPAIGN)) {\n    throw new Error('Acceso denegado: No tienes permiso para enviar correos de prueba.');\n  }\n\n  if (!senderEmail) {\n    throw new Error('Falta el correo del remitente. Por favor, configúralo.');\n  }\n\n  const event = eventId ? events.find(e => e.id === eventId) : null;\n  \n  let finalHtmlBody = htmlBody;\n  // Replace placeholders with test data\n  finalHtmlBody = finalHtmlBody.replace(/{{contact.name}}/g, 'Usuario de Prueba');\n  if (event) {\n    finalHtmlBody = finalHtmlBody.replace(/{{event.date}}/g, event.date);\n  } else {\n    // If no event, use today's date for placeholder\n    finalHtmlBody = finalHtmlBody.replace(/{{event.date}}/g, format(new Date(), 'PPP', { locale: es }));\n  }\n  // Clean up any other unreplaced placeholders\n  finalHtmlBody = finalHtmlBody.replace(/{{contact.name}}/g, '');\n  finalHtmlBody = finalHtmlBody.replace(/{{event.date}}/g, '');\n\n\n  const message = {\n    subject: `[PRUEBA] ${subject}`,\n    body: { contentType: 'HTML', content: finalHtmlBody },\n    toRecipients: [{ emailAddress: { address: recipientEmail } }],\n    attachments: attachment ? [\n      {\n          '@odata.type': '#microsoft.graph.fileAttachment',\n          name: attachment.filename,\n          contentType: attachment.contentType,\n          contentBytes: attachment.content,\n      }\n    ] : undefined,\n  };\n\n  try {\n    const graphClient = await getGraphClient();\n    await graphClient.api(`/users/${senderEmail}/sendMail`).post({ message, saveToSentItems: 'true' });\n    return { success: true };\n  } catch (error) {\n    const errorMessage = (error as any)?.body ? JSON.parse((error as any).body).error.message : (error as Error).message;\n    console.error(`Error al enviar correo de prueba a ${recipientEmail} usando Graph:`, errorMessage);\n    throw new Error(`No se pudo enviar el correo de prueba: ${errorMessage}`);\n  }\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AAqBA,eAAe;IACX,MAAM,EAAE,eAAe,EAAE,eAAe,EAAE,mBAAmB,EAAE,GAAG,QAAQ,GAAG;IAC7E,IAAI,CAAC,mBAAmB,CAAC,mBAAmB,CAAC,qBAAqB;QAC9D,MAAM,IAAI,MAAM;IACpB;IACA,MAAM,aAAa,IAAI,2LAAA,CAAA,yBAAsB,CAAC,iBAAiB,iBAAiB;IAChF,MAAM,eAAe,IAAI,8MAAA,CAAA,wCAAqC,CAAC,YAAY;QAAE,QAAQ;YAAC;SAAuC;IAAC;IAC9H,OAAO,yLAAA,CAAA,SAAM,CAAC,kBAAkB,CAAC;QAAE;IAAa;AACpD;AAEO,eAAe,oBAAoB,OAA6B;IACrE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,cAAc,EAAE,WAAW,EAAE,UAAU,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG;IAEtF,IAAI,CAAC,CAAA,GAAA,yHAAA,CAAA,gBAAa,AAAD,EAAE,MAAM,yHAAA,CAAA,kBAAe,CAAC,aAAa,GAAG;QACvD,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,CAAC,aAAa;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,QAAQ,UAAU,kHAAA,CAAA,SAAM,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,WAAW;IAE7D,IAAI,gBAAgB;IACpB,sCAAsC;IACtC,gBAAgB,cAAc,OAAO,CAAC,qBAAqB;IAC3D,IAAI,OAAO;QACT,gBAAgB,cAAc,OAAO,CAAC,mBAAmB,MAAM,IAAI;IACrE,OAAO;QACL,gDAAgD;QAChD,gBAAgB,cAAc,OAAO,CAAC,mBAAmB,CAAA,GAAA,sJAAA,CAAA,SAAM,AAAD,EAAE,IAAI,QAAQ,OAAO;YAAE,QAAQ,4IAAA,CAAA,KAAE;QAAC;IAClG;IACA,6CAA6C;IAC7C,gBAAgB,cAAc,OAAO,CAAC,qBAAqB;IAC3D,gBAAgB,cAAc,OAAO,CAAC,mBAAmB;IAGzD,MAAM,UAAU;QACd,SAAS,CAAC,SAAS,EAAE,SAAS;QAC9B,MAAM;YAAE,aAAa;YAAQ,SAAS;QAAc;QACpD,cAAc;YAAC;gBAAE,cAAc;oBAAE,SAAS;gBAAe;YAAE;SAAE;QAC7D,aAAa,aAAa;YACxB;gBACI,eAAe;gBACf,MAAM,WAAW,QAAQ;gBACzB,aAAa,WAAW,WAAW;gBACnC,cAAc,WAAW,OAAO;YACpC;SACD,GAAG;IACN;IAEA,IAAI;QACF,MAAM,cAAc,MAAM;QAC1B,MAAM,YAAY,GAAG,CAAC,CAAC,OAAO,EAAE,YAAY,SAAS,CAAC,EAAE,IAAI,CAAC;YAAE;YAAS,iBAAiB;QAAO;QAChG,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAO,OAAO;QACd,MAAM,eAAe,AAAC,OAAe,OAAO,KAAK,KAAK,CAAC,AAAC,MAAc,IAAI,EAAE,KAAK,CAAC,OAAO,GAAG,AAAC,MAAgB,OAAO;QACpH,QAAQ,KAAK,CAAC,CAAC,mCAAmC,EAAE,eAAe,cAAc,CAAC,EAAE;QACpF,MAAM,IAAI,MAAM,CAAC,uCAAuC,EAAE,cAAc;IAC1E;AACF;;;IAlDsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 751, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/actions/template-actions.ts"],"sourcesContent":["'use server';\n\nimport mysql from 'mysql2/promise';\nimport type { Block } from '@/lib/template-utils';\n\nasync function getDbConnection() {\n    const { MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE, MYSQL_PORT } = process.env;\n    if (!MYSQL_HOST || !MYSQL_USER || !MYSQL_DATABASE) {\n        throw new Error('Faltan las variables de entorno de la base de datos. Por favor, configúralas.');\n    }\n    return mysql.createConnection({\n        host: MYSQL_HOST,\n        port: MYSQL_PORT ? parseInt(MYSQL_PORT, 10) : 3306,\n        user: MYSQL_USER,\n        password: MYSQL_PASSWORD,\n        database: MYSQL_DATABASE,\n    });\n}\n\nexport interface Template {\n    id_plantilla: number;\n    nombre: string;\n    asunto_predeterminado: string;\n    contenido: Block[];\n    fecha_creacion: string;\n}\n\nexport async function getTemplatesAction(): Promise<Template[]> {\n    let connection;\n    try {\n        connection = await getDbConnection();\n        const [rows] = await connection.execute('SELECT id_plantilla, nombre, asunto_predeterminado, contenido, fecha_creacion FROM plantillas ORDER BY fecha_creacion DESC');\n        \n        const templates = (rows as any[]).map(row => ({\n            ...row,\n            contenido: row.contenido ? JSON.parse(row.contenido) : [],\n        }));\n        \n        return templates as Template[];\n    } catch (error) {\n        console.error('Error al obtener las plantillas:', error);\n        return [];\n    } finally {\n        if (connection) await connection.end();\n    }\n}\n\nexport async function getTemplateAction(id: number): Promise<Template | null> {\n    let connection;\n    try {\n        connection = await getDbConnection();\n        const [rows] = await connection.execute('SELECT id_plantilla, nombre, asunto_predeterminado, contenido, fecha_creacion FROM plantillas WHERE id_plantilla = ?', [id]);\n        \n        if ((rows as any[]).length === 0) return null;\n\n        const row = (rows as any[])[0];\n        return {\n            ...row,\n            contenido: row.contenido ? JSON.parse(row.contenido) : [],\n        } as Template;\n\n    } catch (error) {\n        console.error(`Error al obtener la plantilla ${id}:`, error);\n        return null;\n    } finally {\n        if (connection) await connection.end();\n    }\n}\n\nexport async function saveTemplateAction(templateData: {\n    id?: number,\n    nombre: string,\n    asunto_predeterminado: string,\n    contenido: Block[]\n}): Promise<{ success: boolean; message: string, id?: number }> {\n    const { id, nombre, asunto_predeterminado, contenido } = templateData;\n    const contenidoJson = JSON.stringify(contenido);\n    let connection;\n    try {\n        connection = await getDbConnection();\n        if (id) {\n            await connection.execute(\n                'UPDATE plantillas SET nombre = ?, asunto_predeterminado = ?, contenido = ? WHERE id_plantilla = ?',\n                [nombre, asunto_predeterminado, contenidoJson, id]\n            );\n            return { success: true, message: 'Plantilla actualizada con éxito.', id };\n        } else {\n            const [result] = await connection.execute(\n                'INSERT INTO plantillas (nombre, asunto_predeterminado, contenido) VALUES (?, ?, ?)',\n                [nombre, asunto_predeterminado, contenidoJson]\n            );\n            const insertId = (result as any).insertId;\n            return { success: true, message: 'Plantilla creada con éxito.', id: insertId };\n        }\n    } catch (error) {\n        console.error('Error al guardar la plantilla:', error);\n        return { success: false, message: `Error al guardar la plantilla: ${(error as Error).message}` };\n    } finally {\n        if (connection) await connection.end();\n    }\n}\n\nexport async function deleteTemplateAction(id: number): Promise<{ success: boolean; message: string }> {\n    let connection;\n    try {\n        connection = await getDbConnection();\n        await connection.execute('DELETE FROM plantillas WHERE id_plantilla = ?', [id]);\n        return { success: true, message: 'Plantilla eliminada con éxito.' };\n    } catch (error) {\n        console.error(`Error al eliminar la plantilla ${id}:`, error);\n        return { success: false, message: `Error al eliminar la plantilla: ${(error as Error).message}` };\n    } finally {\n        if (connection) await connection.end();\n    }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 893, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/%28main%29/send/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {sendCampaign as '400ba817b0cb9d909ed01fecb14a416b84005152c7'} from 'ACTIONS_MODULE0'\nexport {sendTestEmailAction as '4021b06e3ddd3a00eaec703b80737f542c40396c6b'} from 'ACTIONS_MODULE1'\nexport {getTemplatesAction as '00fdeee1b67912cd40169e627b506c6488d511c086'} from 'ACTIONS_MODULE2'\n"],"names":[],"mappings":";AAAA;AACA;AACA","debugId":null}},
    {"offset": {"line": 963, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28main%29/send/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/(main)/send/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(main)/send/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAgS,GAC7T,8DACA","debugId":null}},
    {"offset": {"line": 977, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28main%29/send/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/(main)/send/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(main)/send/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA4Q,GACzS,0CACA","debugId":null}},
    {"offset": {"line": 991, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}