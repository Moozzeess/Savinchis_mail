{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/actions/template-actions.ts"],"sourcesContent":["'use server';\n\nimport mysql from 'mysql2/promise';\nimport type { Block } from '@/lib/template-utils';\n\nasync function getDbConnection() {\n    const { MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE, MYSQL_PORT } = process.env;\n    if (!MYSQL_HOST || !MYSQL_USER || !MYSQL_DATABASE) {\n        throw new Error('Faltan las variables de entorno de la base de datos. Por favor, configúralas.');\n    }\n    return mysql.createConnection({\n        host: MYSQL_HOST,\n        port: MYSQL_PORT ? parseInt(MYSQL_PORT, 10) : 3306,\n        user: MYSQL_USER,\n        password: MYSQL_PASSWORD,\n        database: MYSQL_DATABASE,\n    });\n}\n\nexport interface Template {\n    id_plantilla: number;\n    nombre: string;\n    asunto_predeterminado: string;\n    contenido: Block[];\n    fecha_creacion: string;\n}\n\nexport async function getTemplatesAction(): Promise<Template[]> {\n    let connection;\n    try {\n        connection = await getDbConnection();\n        const [rows] = await connection.execute('SELECT id_plantilla, nombre, asunto_predeterminado, contenido, fecha_creacion FROM plantillas ORDER BY fecha_creacion DESC');\n        \n        const templates = (rows as any[]).map(row => ({\n            ...row,\n            contenido: row.contenido ? JSON.parse(row.contenido) : [],\n        }));\n        \n        return templates as Template[];\n    } catch (error) {\n        console.error('Error al obtener las plantillas:', error);\n        return [];\n    } finally {\n        if (connection) await connection.end();\n    }\n}\n\nexport async function getTemplateAction(id: number): Promise<Template | null> {\n    let connection;\n    try {\n        connection = await getDbConnection();\n        const [rows] = await connection.execute('SELECT id_plantilla, nombre, asunto_predeterminado, contenido, fecha_creacion FROM plantillas WHERE id_plantilla = ?', [id]);\n        \n        if ((rows as any[]).length === 0) return null;\n\n        const row = (rows as any[])[0];\n        return {\n            ...row,\n            contenido: row.contenido ? JSON.parse(row.contenido) : [],\n        } as Template;\n\n    } catch (error) {\n        console.error(`Error al obtener la plantilla ${id}:`, error);\n        return null;\n    } finally {\n        if (connection) await connection.end();\n    }\n}\n\nexport async function saveTemplateAction(templateData: {\n    id?: number,\n    nombre: string,\n    asunto_predeterminado: string,\n    contenido: Block[]\n}): Promise<{ success: boolean; message: string, id?: number }> {\n    const { id, nombre, asunto_predeterminado, contenido } = templateData;\n    const contenidoJson = JSON.stringify(contenido);\n    let connection;\n    try {\n        connection = await getDbConnection();\n        if (id) {\n            await connection.execute(\n                'UPDATE plantillas SET nombre = ?, asunto_predeterminado = ?, contenido = ? WHERE id_plantilla = ?',\n                [nombre, asunto_predeterminado, contenidoJson, id]\n            );\n            return { success: true, message: 'Plantilla actualizada con éxito.', id };\n        } else {\n            const [result] = await connection.execute(\n                'INSERT INTO plantillas (nombre, asunto_predeterminado, contenido) VALUES (?, ?, ?)',\n                [nombre, asunto_predeterminado, contenidoJson]\n            );\n            const insertId = (result as any).insertId;\n            return { success: true, message: 'Plantilla creada con éxito.', id: insertId };\n        }\n    } catch (error) {\n        console.error('Error al guardar la plantilla:', error);\n        return { success: false, message: `Error al guardar la plantilla: ${(error as Error).message}` };\n    } finally {\n        if (connection) await connection.end();\n    }\n}\n\nexport async function deleteTemplateAction(id: number): Promise<{ success: boolean; message: string }> {\n    let connection;\n    try {\n        connection = await getDbConnection();\n        await connection.execute('DELETE FROM plantillas WHERE id_plantilla = ?', [id]);\n        return { success: true, message: 'Plantilla eliminada con éxito.' };\n    } catch (error) {\n        console.error(`Error al eliminar la plantilla ${id}:`, error);\n        return { success: false, message: `Error al eliminar la plantilla: ${(error as Error).message}` };\n    } finally {\n        if (connection) await connection.end();\n    }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/%28main%29/templates/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getTemplatesAction as '00fdeee1b67912cd40169e627b506c6488d511c086'} from 'ACTIONS_MODULE0'\nexport {deleteTemplateAction as '4024a31c3d0e73da34e600b2dfb31666da4162b857'} from 'ACTIONS_MODULE0'\nexport {saveTemplateAction as '40263c8206bd41e6787323cdaa6b06d06cb029fa6e'} from 'ACTIONS_MODULE0'\nexport {getTemplateAction as '40fe3d066ef8bfa392b4411a87e12ed72d92fcc5c9'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 304, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/utils.ts"],"sourcesContent":["\nimport { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\n/**\n * Función de utilidad para combinar nombres de clase de forma condicional.\n * Utiliza `clsx` para las clases condicionales y `tailwind-merge` para resolver\n * conflictos entre clases de Tailwind CSS.\n *\n * @param inputs - Una lista de nombres de clase u objetos de clases condicionales.\n * @returns Una cadena de nombres de clase combinados y optimizados.\n */\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AACA;AACA;;;AAUO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 320, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["\n/**\n * @fileoverview Componente de UI \"Button\" (Botón).\n * Un componente de botón interactivo con varias variantes de estilo y tamaños.\n *\n * @see https://ui.shadcn.com/docs/components/button\n */\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\n/**\n * Define las variantes de estilo (variante y tamaño) para el componente de botón.\n */\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\n/**\n * Propiedades del componente Button.\n */\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\n/**\n * Componente de botón con soporte para variantes y la capacidad de renderizar como su hijo.\n */\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":"AACA;;;;;CAKC;;;;;AACD;AACA;AACA;AAEA;;;;;;AAEA;;CAEC,GACD,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAYF;;CAEC,GACD,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["\n/**\n * @fileoverview Componente de UI \"Card\" (Tarjeta).\n * Proporciona un contenedor estilizado para agrupar contenido relacionado,\n * con secciones para encabezado, contenido y pie de página.\n *\n * @see https://ui.shadcn.com/docs/components/card\n */\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\n/**\n * Componente principal de la tarjeta, actúa como contenedor.\n */\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\n/**\n * Sección de encabezado de la tarjeta.\n */\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\n/**\n * Componente para el título dentro de CardHeader.\n */\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\n/**\n * Componente para la descripción dentro de CardHeader.\n */\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\n/**\n * Sección de contenido principal de la tarjeta.\n */\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\n/**\n * Sección de pie de página de la tarjeta.\n */\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":"AACA;;;;;;CAMC;;;;;;;;;AACD;AAEA;;;;AAEA;;CAEC,GACD,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB;;CAEC,GACD,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB;;CAEC,GACD,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB;;CAEC,GACD,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B;;CAEC,GACD,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B;;CAEC,GACD,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 488, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/template-utils.ts"],"sourcesContent":["import { z } from 'zod';\n\nconst textBlockSchema = z.object({\n  text: z.string().default('Escribe tu texto aquí...'),\n  color: z.string().default('#000000'),\n  fontSize: z.number().default(16),\n  lineHeight: z.number().default(1.5),\n  fontWeight: z.enum(['normal', 'bold']).default('normal'),\n  textAlign: z.enum(['left', 'center', 'right']).default('left'),\n});\n\nconst imageBlockSchema = z.object({\n  src: z.string().url().default('https://placehold.co/600x300.png'),\n  alt: z.string().default('Imagen descriptiva'),\n  width: z.number().default(100), // percentage\n  align: z.enum(['left', 'center', 'right']).default('center'),\n});\n\nconst buttonBlockSchema = z.object({\n  text: z.string().default('Haz Clic Aquí'),\n  href: z.string().url().default('https://example.com'),\n  backgroundColor: z.string().default('#74B49B'),\n  color: z.string().default('#ffffff'),\n  textAlign: z.enum(['left', 'center', 'right']).default('center'),\n  borderRadius: z.number().default(5),\n});\n\nconst spacerBlockSchema = z.object({\n  height: z.number().default(30),\n});\n\nconst dividerBlockSchema = z.object({\n  color: z.string().default('#cccccc'),\n  padding: z.number().default(10), // vertical padding\n});\n\nconst htmlBlockSchema = z.object({\n  code: z.string().default('<!-- Tu código HTML aquí -->'),\n});\n\nexport const blockSchema = z.discriminatedUnion('type', [\n  z.object({ id: z.string(), type: z.literal('text'), content: textBlockSchema }),\n  z.object({ id: z.string(), type: z.literal('image'), content: imageBlockSchema }),\n  z.object({ id: z.string(), type: z.literal('button'), content: buttonBlockSchema }),\n  z.object({ id: z.string(), type: z.literal('spacer'), content: spacerBlockSchema }),\n  z.object({ id: z.string(), type: z.literal('divider'), content: dividerBlockSchema }),\n  z.object({ id: z.string(), type: z.literal('html'), content: htmlBlockSchema }),\n]);\n\nexport type Block = z.infer<typeof blockSchema>;\n\nexport const formSchema = z.object({\n  templateName: z.string().min(1, 'El nombre de la plantilla es requerido.'),\n  emailSubject: z.string().min(1, 'El asunto del correo es requerido.'),\n  blocks: z.array(blockSchema),\n});\n\nexport type FormValues = z.infer<typeof formSchema>;\n\nexport function generateHtmlFromBlocks(blocks: Block[]): string {\n    const content = blocks.map(block => {\n        switch (block.type) {\n            case 'text': {\n                const { text, color, fontSize, lineHeight, fontWeight, textAlign } = block.content;\n                return `<tr><td style=\"padding: 10px 20px; font-family: Arial, sans-serif; text-align: ${textAlign};\"><p style=\"margin:0; color: ${color}; font-size: ${fontSize}px; line-height: ${lineHeight}; font-weight: ${fontWeight};\">${text.replace(/\\n/g, '<br>')}</p></td></tr>`;\n            }\n            case 'image': {\n                const { src, alt, width, align } = block.content;\n                return `<tr><td style=\"padding: 10px 20px; text-align: ${align};\"><img src=\"${src}\" alt=\"${alt || ''}\" style=\"max-width: ${width}%; height: auto; border: 0;\" /></td></tr>`;\n            }\n            case 'button': {\n                const { text, href, backgroundColor, color, textAlign, borderRadius } = block.content;\n                return `<tr><td style=\"padding: 20px; text-align: ${textAlign};\"><a href=\"${href}\" target=\"_blank\" style=\"background-color: ${backgroundColor}; color: ${color}; padding: 12px 25px; text-decoration: none; border-radius: ${borderRadius}px; font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; display: inline-block;\">${text}</a></td></tr>`;\n            }\n            case 'spacer': {\n                const { height } = block.content;\n                return `<tr><td style=\"height: ${height}px; line-height: ${height}px; font-size: ${height}px;\">&nbsp;</td></tr>`;\n            }\n            case 'divider': {\n                const { color, padding } = block.content;\n                return `<tr><td style=\"padding: ${padding}px 20px;\"><hr style=\"border: none; border-top: 1px solid ${color}; margin: 0;\" /></td></tr>`;\n            }\n            case 'html': {\n                return `<tr><td style=\"padding: 0; margin: 0;\">${block.content.code}</td></tr>`;\n            }\n            default:\n                return '';\n        }\n    }).join('');\n\n    return `\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <title>Email Preview</title>\n        <meta charset=\"UTF-8\">\n    </head>\n    <body style=\"margin: 0; padding: 0; background-color: #f4f4f4;\">\n      <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n        <tr>\n          <td align=\"center\" style=\"padding: 20px;\">\n            <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"600\" style=\"background-color: #ffffff; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);\">\n              ${content}\n            </table>\n          </td>\n        </tr>\n      </table>\n    </body>\n    </html>\n  `;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 642, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28main%29/templates/delete-template-button.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const DeleteTemplateButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call DeleteTemplateButton() from the server but DeleteTemplateButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(main)/templates/delete-template-button.tsx <module evaluation>\",\n    \"DeleteTemplateButton\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,uBAAuB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACtD;IAAa,MAAM,IAAI,MAAM;AAAwP,GACrR,qFACA","debugId":null}},
    {"offset": {"line": 656, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28main%29/templates/delete-template-button.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const DeleteTemplateButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call DeleteTemplateButton() from the server but DeleteTemplateButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(main)/templates/delete-template-button.tsx\",\n    \"DeleteTemplateButton\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,uBAAuB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACtD;IAAa,MAAM,IAAI,MAAM;AAAwP,GACrR,iEACA","debugId":null}},
    {"offset": {"line": 670, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 680, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28main%29/templates/page.tsx"],"sourcesContent":["import { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { PlusCircle, Edit } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { getTemplatesAction } from \"@/actions/template-actions\";\nimport { generateHtmlFromBlocks } from \"@/lib/template-utils\";\nimport { DeleteTemplateButton } from \"./delete-template-button\";\n\n/**\n * Página de Plantillas.\n * Muestra una lista de las plantillas de correo electrónico existentes\n * y permite crear nuevas o editar/eliminar las actuales.\n */\nexport default async function TemplatesPage() {\n  const templates = await getTemplatesAction();\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-headline font-bold\">Plantillas</h1>\n          <p className=\"text-muted-foreground\">\n            Crea y gestiona tus plantillas de correo electrónico.\n          </p>\n        </div>\n        <Button asChild>\n          <Link href=\"/templates/editor\">\n            <PlusCircle className=\"mr-2\" />\n            Crear Plantilla\n          </Link>\n        </Button>\n      </div>\n\n      {templates.length === 0 ? (\n        <div className=\"text-center text-muted-foreground p-8 border-dashed border-2 rounded-lg\">\n          <p>No se encontraron plantillas.</p>\n          <p>¡Crea tu primera plantilla para empezar!</p>\n        </div>\n      ) : (\n        <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {templates.map((template) => {\n            const templateHtml = generateHtmlFromBlocks(template.contenido);\n            return (\n              <Card key={template.id_plantilla} className=\"flex flex-col\">\n                <CardHeader className=\"p-0\">\n                  <div className=\"aspect-[3/2] w-full h-full overflow-hidden rounded-t-lg bg-muted pointer-events-none\">\n                    <iframe\n                      srcDoc={templateHtml}\n                      title={template.nombre}\n                      className=\"w-full h-full border-0 scale-[0.5] origin-top-left\"\n                      style={{ width: \"200%\", height: \"200%\" }}\n                      scrolling=\"no\"\n                    />\n                  </div>\n                </CardHeader>\n                <CardContent className=\"pt-4 flex-grow\">\n                  <CardTitle className=\"text-xl font-headline\">\n                    {template.nombre}\n                  </CardTitle>\n                  <CardDescription>{template.asunto_predeterminado}</CardDescription>\n                </CardContent>\n                <CardFooter className=\"flex justify-end gap-2\">\n                  <Button variant=\"ghost\" size=\"icon\" asChild>\n                    <Link href={`/templates/editor?id=${template.id_plantilla}`}>\n                      <Edit className=\"h-4 w-4\" />\n                    </Link>\n                  </Button>\n                  <DeleteTemplateButton templateId={template.id_plantilla} />\n                </CardFooter>\n              </Card>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAQA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;AAOe,eAAe;IAC5B,MAAM,YAAY,MAAM,CAAA,GAAA,qIAAA,CAAA,qBAAkB,AAAD;IAEzC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAAmC;;;;;;0CACjD,8OAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;kCAIvC,8OAAC,kIAAA,CAAA,SAAM;wBAAC,OAAO;kCACb,cAAA,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;;8CACT,8OAAC,kNAAA,CAAA,aAAU;oCAAC,WAAU;;;;;;gCAAS;;;;;;;;;;;;;;;;;;YAMpC,UAAU,MAAM,KAAK,kBACpB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;kCAAE;;;;;;kCACH,8OAAC;kCAAE;;;;;;;;;;;qCAGL,8OAAC;gBAAI,WAAU;0BACZ,UAAU,GAAG,CAAC,CAAC;oBACd,MAAM,eAAe,CAAA,GAAA,+HAAA,CAAA,yBAAsB,AAAD,EAAE,SAAS,SAAS;oBAC9D,qBACE,8OAAC,gIAAA,CAAA,OAAI;wBAA6B,WAAU;;0CAC1C,8OAAC,gIAAA,CAAA,aAAU;gCAAC,WAAU;0CACpB,cAAA,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCACC,QAAQ;wCACR,OAAO,SAAS,MAAM;wCACtB,WAAU;wCACV,OAAO;4CAAE,OAAO;4CAAQ,QAAQ;wCAAO;wCACvC,WAAU;;;;;;;;;;;;;;;;0CAIhB,8OAAC,gIAAA,CAAA,cAAW;gCAAC,WAAU;;kDACrB,8OAAC,gIAAA,CAAA,YAAS;wCAAC,WAAU;kDAClB,SAAS,MAAM;;;;;;kDAElB,8OAAC,gIAAA,CAAA,kBAAe;kDAAE,SAAS,qBAAqB;;;;;;;;;;;;0CAElD,8OAAC,gIAAA,CAAA,aAAU;gCAAC,WAAU;;kDACpB,8OAAC,kIAAA,CAAA,SAAM;wCAAC,SAAQ;wCAAQ,MAAK;wCAAO,OAAO;kDACzC,cAAA,8OAAC,4JAAA,CAAA,UAAI;4CAAC,MAAM,CAAC,qBAAqB,EAAE,SAAS,YAAY,EAAE;sDACzD,cAAA,8OAAC,2MAAA,CAAA,OAAI;gDAAC,WAAU;;;;;;;;;;;;;;;;kDAGpB,8OAAC,oKAAA,CAAA,uBAAoB;wCAAC,YAAY,SAAS,YAAY;;;;;;;;;;;;;uBAxBhD,SAAS,YAAY;;;;;gBA4BpC;;;;;;;;;;;;AAKV","debugId":null}}]
}