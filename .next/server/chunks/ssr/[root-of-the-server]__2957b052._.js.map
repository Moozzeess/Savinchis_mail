{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28main%29/layout.tsx"],"sourcesContent":["'use client';\n\nimport Link from \"next/link\";\nimport { useRouter } from 'next/navigation';\nimport {\n  SidebarProvider,\n  Sidebar,\n  SidebarHeader,\n  SidebarContent,\n  SidebarFooter,\n  SidebarTrigger,\n  SidebarInset,\n  SidebarRail,\n} from \"@/components/ui/sidebar\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Settings, LogOut } from \"lucide-react\";\nimport { AppLogo } from \"@/components/app-logo\";\nimport { NavLinks } from \"@/components/nav-links\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { useAuth } from \"@/context/auth-context\";\nimport { hasPermission, APP_PERMISSIONS } from \"@/lib/permissions\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport React from \"react\";\n\n/**\n * Layout principal para las secciones autenticadas de la aplicaci칩n.\n * Incluye una barra lateral de navegaci칩n persistente y una cabecera.\n * @param {object} props - Propiedades del componente.\n * @param {React.ReactNode} props.children - Los componentes hijos que se renderizar치n dentro del layout.\n */\nexport default function MainLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const { role, logout, isLoading } = useAuth();\n  const router = useRouter();\n\n  const handleLogout = () => {\n    logout();\n    router.push('/login');\n  };\n\n  const getRoleName = (role: string | null) => {\n    if (!role) return \"Desconocido\";\n    return {\n      it: 'Administrador (TI)',\n      marketing: 'Marketing',\n      hr: 'Recursos Humanos'\n    }[role] || 'Usuario';\n  };\n  \n  React.useEffect(() => {\n    if (!isLoading && !role) {\n      router.push('/login');\n    }\n  }, [role, isLoading, router]);\n\n  if (isLoading || !role) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center\">\n        <p>Cargando...</p>\n      </div>\n    );\n  }\n  \n  const canViewSettings = hasPermission(role, APP_PERMISSIONS.VIEW_SETTINGS);\n\n  return (\n    <SidebarProvider>\n      <Sidebar collapsible=\"icon\">\n        <SidebarRail />\n        <SidebarHeader>\n          <div className=\"flex items-center gap-2\">\n            <AppLogo className=\"size-7 text-primary\" />\n            <span className=\"text-lg font-headline font-semibold\">\n              EmailCraft Lite\n            </span>\n          </div>\n        </SidebarHeader>\n        <SidebarContent>\n          <NavLinks />\n        </SidebarContent>\n        <SidebarFooter>\n           <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" className=\"justify-start gap-2 w-full p-2 h-auto\">\n                <Avatar className=\"size-8\">\n                  <AvatarImage src=\"https://placehold.co/100x100.png\" alt=\"User\" data-ai-hint=\"person portrait\" />\n                  <AvatarFallback>U</AvatarFallback>\n                </Avatar>\n                <div className=\"text-left group-data-[collapsible=icon]:hidden\">\n                  <p className=\"font-semibold text-sm\">{getRoleName(role)}</p>\n                  <p className=\"text-xs text-muted-foreground\">{role}@email.com</p>\n                </div>\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent side=\"right\" align=\"start\" className=\"w-56\">\n              <DropdownMenuLabel>Mi Cuenta</DropdownMenuLabel>\n              {canViewSettings && <DropdownMenuSeparator />}\n              {canViewSettings && (\n                 <DropdownMenuItem asChild>\n                    <Link href=\"/settings\"><Settings className=\"mr-2 h-4 w-4\" /><span>Ajustes</span></Link>\n                 </DropdownMenuItem>\n              )}\n              <DropdownMenuSeparator />\n              <DropdownMenuItem onClick={handleLogout}>\n                <LogOut className=\"mr-2 h-4 w-4\" />\n                <span>Cerrar sesi칩n</span>\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </SidebarFooter>\n      </Sidebar>\n      <SidebarInset>\n        <header className=\"flex h-14 items-center gap-4 border-b bg-background/80 backdrop-blur-sm px-6 sticky top-0 z-40\">\n          <SidebarTrigger className=\"md:hidden\" />\n          <div className=\"flex-1\">\n            <h1 className=\"text-lg font-headline font-semibold\"></h1>\n          </div>\n        </header>\n        <main className=\"flex-1 p-6\">{children}</main>\n      </SidebarInset>\n    </SidebarProvider>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;;;;;;;;;;;;;;;AAaA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;AAcA;AA9BA;;;;;;;;;;;;;;AAsCe,SAAS,WAAW,EACjC,QAAQ,EAGT;IACC,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG;IACpC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,eAAe;QACnB;QACA,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,cAAc,CAAC;QACnB,IAAI,CAAC,MAAM,OAAO;QAClB,OAAO,CAAA;YACL,IAAI;YACJ,WAAW;YACX,IAAI;QACN,CAAA,CAAC,CAAC,KAAK,IAAI;IACb;IAEA,qMAAA,CAAA,UAAK,CAAC,SAAS,CAAC;QACd,IAAI,CAAC,aAAa,CAAC,MAAM;YACvB,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAM;QAAW;KAAO;IAE5B,IAAI,aAAa,CAAC,MAAM;QACtB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;0BAAE;;;;;;;;;;;IAGT;IAEA,MAAM,kBAAkB,cAAc,MAAM,gBAAgB,aAAa;IAEzE,qBACE,8OAAC;;0BACC,8OAAC;gBAAQ,aAAY;;kCACnB,8OAAC;;;;;kCACD,8OAAC;kCACC,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAQ,WAAU;;;;;;8CACnB,8OAAC;oCAAK,WAAU;8CAAsC;;;;;;;;;;;;;;;;;kCAK1D,8OAAC;kCACC,cAAA,8OAAC;;;;;;;;;;kCAEH,8OAAC;kCACE,cAAA,8OAAC;;8CACA,8OAAC;oCAAoB,OAAO;8CAC1B,cAAA,8OAAC;wCAAO,SAAQ;wCAAQ,WAAU;;0DAChC,8OAAC;gDAAO,WAAU;;kEAChB,8OAAC;wDAAY,KAAI;wDAAmC,KAAI;wDAAO,gBAAa;;;;;;kEAC5E,8OAAC;kEAAe;;;;;;;;;;;;0DAElB,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAE,WAAU;kEAAyB,YAAY;;;;;;kEAClD,8OAAC;wDAAE,WAAU;;4DAAiC;4DAAK;;;;;;;;;;;;;;;;;;;;;;;;8CAIzD,8OAAC;oCAAoB,MAAK;oCAAQ,OAAM;oCAAQ,WAAU;;sDACxD,8OAAC;sDAAkB;;;;;;wCAClB,iCAAmB,8OAAC;;;;;wCACpB,iCACE,8OAAC;4CAAiB,OAAO;sDACtB,cAAA,8OAAC,4JAAA,CAAA,UAAI;gDAAC,MAAK;;kEAAY,8OAAC,0MAAA,CAAA,WAAQ;wDAAC,WAAU;;;;;;kEAAiB,8OAAC;kEAAK;;;;;;;;;;;;;;;;;sDAGxE,8OAAC;;;;;sDACD,8OAAC;4CAAiB,SAAS;;8DACzB,8OAAC,0MAAA,CAAA,SAAM;oDAAC,WAAU;;;;;;8DAClB,8OAAC;8DAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAMhB,8OAAC;;kCACC,8OAAC;wBAAO,WAAU;;0CAChB,8OAAC;gCAAe,WAAU;;;;;;0CAC1B,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAG,WAAU;;;;;;;;;;;;;;;;;kCAGlB,8OAAC;wBAAK,WAAU;kCAAc;;;;;;;;;;;;;;;;;;AAItC","debugId":null}}]
}