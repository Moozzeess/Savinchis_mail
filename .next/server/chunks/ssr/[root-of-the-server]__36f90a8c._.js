module.exports = {

"[externals]/stream [external] (stream, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}}),
"[externals]/http [external] (http, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}}),
"[externals]/punycode [external] (punycode, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("punycode", () => require("punycode"));

module.exports = mod;
}}),
"[externals]/https [external] (https, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}}),
"[externals]/zlib [external] (zlib, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}}),
"[externals]/node:os [external] (node:os, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:os", () => require("node:os"));

module.exports = mod;
}}),
"[externals]/node:util [external] (node:util, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:util", () => require("node:util"));

module.exports = mod;
}}),
"[externals]/node:process [external] (node:process, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:process", () => require("node:process"));

module.exports = mod;
}}),
"[externals]/node:crypto [external] (node:crypto, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:crypto", () => require("node:crypto"));

module.exports = mod;
}}),
"[externals]/node:http [external] (node:http, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:http", () => require("node:http"));

module.exports = mod;
}}),
"[externals]/node:https [external] (node:https, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:https", () => require("node:https"));

module.exports = mod;
}}),
"[externals]/node:zlib [external] (node:zlib, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:zlib", () => require("node:zlib"));

module.exports = mod;
}}),
"[externals]/node:stream [external] (node:stream, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:stream", () => require("node:stream"));

module.exports = mod;
}}),
"[externals]/net [external] (net, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}}),
"[externals]/tls [external] (tls, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}}),
"[externals]/assert [external] (assert, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("assert", () => require("assert"));

module.exports = mod;
}}),
"[externals]/tty [external] (tty, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("tty", () => require("tty"));

module.exports = mod;
}}),
"[externals]/util [external] (util, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}}),
"[externals]/os [external] (os, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("os", () => require("os"));

module.exports = mod;
}}),
"[externals]/events [external] (events, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}}),
"[externals]/node:fs [external] (node:fs, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:fs", () => require("node:fs"));

module.exports = mod;
}}),
"[externals]/node:path [external] (node:path, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:path", () => require("node:path"));

module.exports = mod;
}}),
"[externals]/crypto [external] (crypto, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}}),
"[externals]/buffer [external] (buffer, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("buffer", () => require("buffer"));

module.exports = mod;
}}),
"[externals]/fs [external] (fs, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}}),
"[externals]/node:fs/promises [external] (node:fs/promises, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:fs/promises", () => require("node:fs/promises"));

module.exports = mod;
}}),
"[externals]/child_process [external] (child_process, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("child_process", () => require("child_process"));

module.exports = mod;
}}),
"[externals]/process [external] (process, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("process", () => require("process"));

module.exports = mod;
}}),
"[externals]/timers [external] (timers, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("timers", () => require("timers"));

module.exports = mod;
}}),
"[externals]/string_decoder [external] (string_decoder, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("string_decoder", () => require("string_decoder"));

module.exports = mod;
}}),
"[project]/src/lib/data.ts [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
/**
 * @fileOverview Datos de prueba para la aplicación.
 * Este archivo contiene datos de ejemplo para campañas y contactos,
 * utilizados para poblar la interfaz de usuario hasta que se conecte una base de datos real.
 */ /**
 * Datos de ejemplo para las campañas de correo electrónico.
 */ __turbopack_context__.s({
    "campaigns": (()=>campaigns),
    "certificateTemplates": (()=>certificateTemplates),
    "contacts": (()=>contacts),
    "events": (()=>events),
    "surveys": (()=>surveys),
    "templates": (()=>templates)
});
const campaigns = [
    {
        name: "Campaña de Bienvenida",
        status: "TERMINADA",
        sent: "5,000",
        opens: "35%",
        clicks: "8%",
        date: "2024-07-01"
    },
    {
        name: "Oferta Flash 24h",
        status: "EXPIRADA",
        sent: "2,500",
        opens: "45%",
        clicks: "15%",
        date: "2024-07-10"
    },
    {
        name: "Lanzamiento Nuevo Producto",
        status: "INICIADA",
        sent: "1,200",
        opens: "12%",
        clicks: "2%",
        date: "2024-07-18"
    },
    {
        name: "Promoción Black Friday",
        status: "TIEMPO LIMITADO",
        sent: "0",
        opens: "-",
        clicks: "-",
        date: "2024-11-29"
    },
    {
        name: "Venta de Aniversario",
        status: "AGOTADA",
        sent: "10,000",
        opens: "50%",
        clicks: "20%",
        date: "2024-06-15"
    }
];
const templates = [
    {
        id: "1",
        name: "Newsletter Mensual",
        description: "Plantilla estándar para el boletín informativo de cada mes.",
        image: "https://placehold.co/600x400.png",
        aiHint: "abstract pattern"
    },
    {
        id: "2",
        name: "Anuncio de Producto",
        description: "Plantilla para anunciar nuevos productos o características.",
        image: "https://placehold.co/600x400.png",
        aiHint: "product launch"
    },
    {
        id: "3",
        name: "Oferta Especial",
        description: "Diseño llamativo para promociones y descuentos.",
        image: "https://placehold.co/600x400.png",
        aiHint: "special offer"
    }
];
const contacts = [
    {
        email: "juan.perez@example.com",
        name: "Juan Perez",
        status: "Suscrito",
        dateAdded: "2024-07-10"
    },
    {
        email: "maria.garcia@example.com",
        name: "Maria Garcia",
        status: "Suscrito",
        dateAdded: "2024-07-09"
    },
    {
        email: "baja@example.com",
        name: "Carlos Baja",
        status: "Baja",
        dateAdded: "2024-06-20"
    }
];
const surveys = [
    {
        id: "1",
        name: "Feedback de Producto de TI",
        description: "Encuesta para recopilar opiniones sobre nuestro último software.",
        responses: 150
    },
    {
        id: "2",
        name: "Satisfacción del Cliente Tech",
        description: "Mide la satisfacción general de nuestros clientes con el soporte técnico.",
        responses: 278
    },
    {
        id: "3",
        name: "Interés en Nuevos Cursos",
        description: "Sondeo sobre posibles nuevos cursos de desarrollo y TI.",
        responses: 45
    }
];
const events = [
    {
        id: "1",
        name: "Taller de Marketing Digital",
        date: "2024-08-15",
        status: "Realizado",
        attendees: 75
    },
    {
        id: "2",
        name: "Conferencia de Liderazgo",
        date: "2024-09-05",
        status: "Próximo",
        attendees: 120
    },
    {
        id: "3",
        name: "Webinar de Nuevas Tecnologías",
        date: "2024-07-20",
        status: "Realizado",
        attendees: 250
    }
];
const certificateTemplates = {
    '1': 'iVBORw0KGgoAAAANSUhEUgAAAMgAAABkCAYAAADDlWIpAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGSSURBVHhe7dJBDQAgDAAx2NB/yHwM46GE+zs7+8HBAgQIECAwERAgQIAAgYmAAAECEAEDAgECEQEBAgECEQEBAgECBAgQCAmY+wEECBAgQCAhIM4DBAgQIEAgISDOAwQIECBAICEgzoMECBAgQCAhIM4DBAgQIEAgISDOAwQIECBAICEgzoMECBAgQCAhIM4DBAgQIEAgISDOAwQIECBAICEgzoMECBAgQCAhIM4DBAgQIEAgISDOAwQIECBAICEgzoMECBAgQCAhIM4DBAgQIEAgISDOAwQIECBAICEgzoMECBAgQCAhIM4DBAgQIEAgISDOAwQIECBAICEgzoMECBAgQCAhIM4DBAgQIEAgISDOAwQIECBAICEgzoMECBAgQCAhIM4DBAgQIEAgISDOAwQIECBAICEgzoMECBAgQCAhIM4DBAgQIEAgISDOAwQIECBAICEgzoMECBAgQCAhIM4DBAgQIEAgISDOAwQIECBAICEgzoMECBAgQCAhIM4DBAgQIEAgISDOAwQIECBAICEgzoMECBAgQCAhIM4DBAgQIEAgISDOAwQIECBAICEgzoMECBAgQCAhIM4DBAgQIECAQEBAgAABAq8CgU5q3+UAAAAASUVORK5CYII='
};
}}),
"[project]/src/lib/permissions.ts [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
/**
 * @fileoverview Define los roles y permisos para el Control de Acceso Basado en Roles (RBAC).
 * Este archivo centraliza la lógica de permisos para simular un sistema RBAC.
 * En una aplicación real, esta información provendría de una base de datos.
 */ __turbopack_context__.s({
    "APP_PERMISSIONS": (()=>APP_PERMISSIONS),
    "ROLES": (()=>ROLES),
    "ROLE_PERMISSIONS": (()=>ROLE_PERMISSIONS),
    "hasPermission": (()=>hasPermission)
});
const ROLES = {
    IT: 'it',
    MARKETING: 'marketing',
    HR: 'hr'
};
const APP_PERMISSIONS = {
    // General
    VIEW_DASHBOARD: 'dashboard:view',
    // Envío
    SEND_CAMPAIGN: 'campaign:send',
    VIEW_CAMPAIGN_MONITOR: 'campaign:view',
    VIEW_MAILBOX: 'mailbox:view',
    // Gestión
    VIEW_CONTACTS: 'contacts:view',
    VIEW_TEMPLATES: 'templates:view',
    VIEW_EVENTS: 'events:view',
    VIEW_SURVEYS: 'surveys:view',
    // Avanzado
    VIEW_PERFORMANCE: 'performance:view',
    GENERATE_REPORTS: 'performance:generate_report',
    VIEW_SETTINGS: 'settings:view'
};
const ROLE_PERMISSIONS = {
    [ROLES.IT]: Object.values(APP_PERMISSIONS),
    [ROLES.MARKETING]: [
        APP_PERMISSIONS.VIEW_DASHBOARD,
        APP_PERMISSIONS.SEND_CAMPAIGN,
        APP_PERMISSIONS.VIEW_CAMPAIGN_MONITOR,
        APP_PERMISSIONS.VIEW_MAILBOX,
        APP_PERMISSIONS.VIEW_CONTACTS,
        APP_PERMISSIONS.VIEW_TEMPLATES,
        APP_PERMISSIONS.VIEW_SURVEYS,
        APP_PERMISSIONS.VIEW_PERFORMANCE
    ],
    [ROLES.HR]: [
        APP_PERMISSIONS.VIEW_DASHBOARD,
        APP_PERMISSIONS.SEND_CAMPAIGN,
        APP_PERMISSIONS.VIEW_CAMPAIGN_MONITOR,
        APP_PERMISSIONS.VIEW_MAILBOX,
        APP_PERMISSIONS.VIEW_CONTACTS,
        APP_PERMISSIONS.VIEW_EVENTS
    ]
};
function hasPermission(role, permission) {
    if (!role) return false;
    // En una implementación real y dinámica, ROLE_PERMISSIONS se obtendría
    // de un estado global o contexto que el admin de TI puede modificar.
    // Por ahora, usamos la configuración estática.
    return ROLE_PERMISSIONS[role]?.includes(permission) || false;
}
}}),
"[project]/src/app/actions/send-campaign-action.ts [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
/* __next_internal_action_entry_do_not_use__ [{"401372f659c5451f99035a7f116333db4ac66a7ce4":"sendCampaign"},"",""] */ __turbopack_context__.s({
    "sendCampaign": (()=>sendCampaign)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$app$2d$render$2f$encryption$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/app-render/encryption.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$isomorphic$2d$fetch$2f$fetch$2d$npm$2d$node$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/isomorphic-fetch/fetch-npm-node.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$azure$2f$identity$2f$dist$2f$esm$2f$index$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@azure/identity/dist/esm/index.js [app-rsc] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$azure$2f$identity$2f$dist$2f$esm$2f$credentials$2f$clientSecretCredential$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@azure/identity/dist/esm/credentials/clientSecretCredential.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$microsoft$2f$microsoft$2d$graph$2d$client$2f$lib$2f$es$2f$src$2f$index$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@microsoft/microsoft-graph-client/lib/es/src/index.js [app-rsc] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$microsoft$2f$microsoft$2d$graph$2d$client$2f$lib$2f$es$2f$src$2f$Client$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@microsoft/microsoft-graph-client/lib/es/src/Client.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$microsoft$2f$microsoft$2d$graph$2d$client$2f$authProviders$2f$azureTokenCredentials$2f$index$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@microsoft/microsoft-graph-client/authProviders/azureTokenCredentials/index.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$mysql2$2f$promise$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/mysql2/promise.js [app-rsc] (ecmascript)");
// Importa la función parse del paquete csv-parse/sync para parsear archivos CSV de forma síncrona.
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$csv$2d$parse$2f$lib$2f$sync$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/csv-parse/lib/sync.js [app-rsc] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$csv$2d$parse$2f$lib$2f$sync$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/csv-parse/lib/sync.js [app-rsc] (ecmascript) <locals>");
// Importa todas las funciones del paquete xlsx bajo el alias XLSX para trabajar con archivos Excel.
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$xlsx$2f$xlsx$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/xlsx/xlsx.mjs [app-rsc] (ecmascript)");
// Importa la constante 'events' desde el módulo de datos local.
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$data$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/data.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$permissions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/permissions.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js [app-rsc] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
/**
 * Obtiene una lista de destinatarios desde la fuente especificada.
 */ async function getRecipients(recipientData) {
    const { type, value } = recipientData;
    // Desestructura el tipo y el valor de los datos del destinatario.
    // Función auxiliar para encontrar una clave en un objeto de forma insensible a mayúsculas/minúsculas.
    const findKey = (obj, potentialKeys)=>{
        // Itera sobre las claves del objeto.
        const key = Object.keys(obj).find((k)=>potentialKeys.includes(k.toLowerCase()));
        // Si encuentra una clave que coincide (insensible a mayúsculas/minúsculas), devuelve su valor; de lo contrario, undefined.
        return key ? obj[key] : undefined;
    };
    if (type === 'csv') {
        try {
            const records = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$csv$2d$parse$2f$lib$2f$sync$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__["parse"])(value, {
                columns: true,
                // Especifica que la primera fila contiene nombres de columnas.
                skip_empty_lines: true
            });
            // Parsear el valor del CSV en un array de objetos.
            if (records.length === 0) return [];
            // Si no hay registros, retorna un array vacío.
            const emailKey = Object.keys(records[0]).find((k)=>k.toLowerCase() === 'email');
            // Busca la clave 'email' (insensible a mayúsculas/minúsculas) en el primer registro.
            if (!emailKey) throw new Error('La columna "email" no se encontró en el archivo CSV.');
            // Si no se encuentra la columna 'email', lanza un error.
            return records.map((record)=>({
                    email: record[emailKey],
                    name: findKey(record, [
                        'name',
                        'nombre',
                        'fullname',
                        'nombre completo'
                    ])
                })).filter((r)=>r.email && r.email.includes('@'));
        // Mapea los registros para crear objetos Recipient y filtra los que no tienen un email válido.
        } catch (error) {
            console.error('Error al procesar el archivo CSV:', error);
            throw new Error(`Error al procesar el archivo CSV: ${error.message}`);
        }
    }
    if (type === 'excel') {
        try {
            // Decodifica el contenido base64 del archivo Excel a un buffer.
            const buffer = Buffer.from(value, 'base64');
            // Lee el buffer como un libro de trabajo de Excel.
            const workbook = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$xlsx$2f$xlsx$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["read"])(buffer, {
                type: 'buffer'
            });
            // Obtiene el nombre de la primera hoja del libro de trabajo.
            const sheetName = workbook.SheetNames[0];
            // Obtiene la hoja de trabajo por su nombre.
            const worksheet = workbook.Sheets[sheetName];
            // Convierte la hoja de trabajo a un array de objetos JSON.
            const jsonData = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$xlsx$2f$xlsx$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["utils"].sheet_to_json(worksheet);
            if (jsonData.length === 0) return [];
            // Si no hay datos JSON, retorna un array vacío.
            const emailKey = Object.keys(jsonData[0]).find((key)=>key.toLowerCase() === 'email');
            // Busca la clave 'email' (insensible a mayúsculas/minúsculas) en el primer objeto JSON.
            if (!emailKey) throw new Error('La columna "email" no se encontró en el archivo Excel.');
            // Si no se encuentra la columna 'email', lanza un error.
            return jsonData.map((row)=>({
                    email: row[emailKey],
                    name: findKey(row, [
                        'name',
                        'nombre',
                        'fullname',
                        'nombre completo'
                    ])
                })).filter((r)=>r.email && typeof r.email === 'string' && r.email.includes('@'));
        } catch (error) {
            console.error('Error al procesar el archivo Excel:', error);
            throw new Error(`Error al procesar el archivo Excel: ${error.message}`);
        }
    }
    const { MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE, MYSQL_PORT } = process.env;
    // Desestructura las variables de entorno para la conexión a la base de datos.
    if (!MYSQL_HOST || !MYSQL_USER || !MYSQL_DATABASE) {
        throw new Error('Faltan las variables de entorno de la base de datos. Por favor, configúralas.');
    }
    // Verifica que las variables de entorno necesarias para la base de datos estén configuradas. Si faltan, lanza un error.
    let connection;
    try {
        connection = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$mysql2$2f$promise$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["default"].createConnection({
            host: MYSQL_HOST,
            port: MYSQL_PORT ? parseInt(MYSQL_PORT, 10) : 3306,
            user: MYSQL_USER,
            // Convierte el puerto a número si está definido, de lo contrario usa 3306.
            password: MYSQL_PASSWORD,
            database: MYSQL_DATABASE
        });
        // Crea una conexión a la base de datos MySQL utilizando las variables de entorno.
        let sql_query = '';
        let params = [];
        // Inicializa la variable para la consulta SQL y los parámetros.
        // Si el tipo de datos del destinatario es 'date', construye la consulta SQL para obtener contactos por fecha.
        if (type === 'date') {
            sql_query = `
        SELECT t1.email, t1.nombre_completo as name
        FROM order_data AS t1 INNER JOIN order_data_online AS t2 ON t1.Ds_Merchant_Order = t2.Ds_Order
        WHERE
            t1.fecha_visita = ?
            AND t2.Ds_ErrorCode = '00'
            AND t2.Ds_ErrorMessage = 'completed'
            AND NOT t1.email IN ('alberto.silva@papalote.org.mx', 'alejandracervantesm@gmail.com')
      `;
            params = [
                value
            ];
        // El valor se usa como parámetro para la fecha de visita.
        // Si el tipo de datos del destinatario es 'sql', usa el valor directamente como consulta SQL.
        } else if (type === 'sql') {
            sql_query = value;
            params = []; // Las consultas SQL personalizadas no esperan parámetros por defecto aquí.
        }
        const [rows] = await connection.execute(sql_query, params);
        return rows.filter((row)=>row.email);
    // Ejecuta la consulta SQL y filtra las filas para asegurarse de que tengan un email.
    } catch (error) {
        console.error('Error al conectar o consultar la base de datos:', error);
        throw new Error('No se pudo obtener los contactos de la base de datos.');
    // Captura y loguea errores de conexión o consulta de la base de datos, luego lanza un nuevo error.
    } finally{
        if (connection) await connection.end();
    // Asegura que la conexión a la base de datos se cierre al finalizar (éxito o error).
    }
}
// Función asíncrona para obtener una instancia del cliente de Microsoft Graph.
async function getGraphClient() {
    // Desestructura las variables de entorno necesarias para la autenticación con Microsoft Graph.
    const { GRAPH_CLIENT_ID, GRAPH_TENANT_ID, GRAPH_CLIENT_SECRET } = process.env;
    if (!GRAPH_CLIENT_ID || !GRAPH_TENANT_ID || !GRAPH_CLIENT_SECRET) {
        throw new Error('Faltan las variables de entorno de Microsoft Graph. Por favor, configúralas.');
    }
    const credential = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$azure$2f$identity$2f$dist$2f$esm$2f$credentials$2f$clientSecretCredential$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ClientSecretCredential"](GRAPH_TENANT_ID, GRAPH_CLIENT_ID, GRAPH_CLIENT_SECRET);
    const authProvider = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$microsoft$2f$microsoft$2d$graph$2d$client$2f$authProviders$2f$azureTokenCredentials$2f$index$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["TokenCredentialAuthenticationProvider"](credential, {
        scopes: [
            'https://graph.microsoft.com/.default'
        ]
    });
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$microsoft$2f$microsoft$2d$graph$2d$client$2f$lib$2f$es$2f$src$2f$Client$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["Client"].initWithMiddleware({
        authProvider
    });
}
// Función de utilidad para crear un retraso basado en un número de milisegundos.
const delay = (ms)=>new Promise((res)=>setTimeout(res, ms));
/**
 * Envía un correo electrónico utilizando Microsoft Graph con una política de reintentos.
 * @param graphClient - El cliente de Microsoft Graph.
 * @param message - El objeto de mensaje a enviar.
 * @param userMail - El correo del usuario remitente.
 * @param maxRetries - El número máximo de reintentos.
 * @throws Si el envío falla después de todos los reintentos.
 */ async function sendEmailWithRetry(graphClient, message, userMail, maxRetries = 3) {
    for(let i = 0; i < maxRetries; i++){
        try {
            await graphClient.api(`/users/${userMail}/sendMail`).post({
                message,
                saveToSentItems: 'true'
            });
            return; // Éxito
        } catch (error) {
            // Verifica si es un error de throttling (demasiadas solicitudes)
            if (error.statusCode === 429 && i < maxRetries - 1) {
                // Obtiene el tiempo de espera del encabezado 'retry-after' o usa un backoff exponencial.
                const retryAfter = error.responseHeaders?.['retry-after'] || Math.pow(2, i);
                console.warn(`Throttled por la API de Graph. Reintentando en ${retryAfter} segundos...`);
                await delay(retryAfter * 1000);
            } else {
                // Si es otro tipo de error, lo relanza para que sea manejado más arriba.
                throw error;
            }
        }
    }
    // Si todos los reintentos fallan, lanza un error.
    throw new Error(`No se pudo enviar el correo después de ${maxRetries} reintentos.`);
}
async function sendCampaign(payload) {
    const { subject, htmlBody, recipientData, attachment, eventId, role } = payload;
    if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$permissions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["hasPermission"])(role, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$permissions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["APP_PERMISSIONS"].SEND_CAMPAIGN)) {
        throw new Error('Acceso denegado: No tienes permiso para enviar campañas.');
    }
    // Estos ajustes ahora están configurados globalmente (ej: en la página de Ajustes).
    // Para esta acción, usaremos valores por defecto. En una aplicación real, se obtendrían de una base de datos o servicio de configuración.
    const batchSize = 50;
    const emailDelay = 100; // milisegundos
    const batchDelay = 5; // segundos
    const startTime = Date.now();
    // Registra el tiempo de inicio para calcular la duración total.
    const { GRAPH_USER_MAIL } = process.env;
    if (!GRAPH_USER_MAIL) {
        throw new Error('Falta la variable de entorno GRAPH_USER_MAIL. Por favor, configúrala.');
    }
    // Verifica que la variable de entorno GRAPH_USER_MAIL esté configurada. Si falta, lanza un error.
    const recipients = await getRecipients(recipientData);
    // Obtiene la lista de destinatarios utilizando la función getRecipients.
    if (recipients.length === 0) {
        return {
            success: true,
            message: `No se encontraron destinatarios. No se enviaron correos.`,
            stats: {
                sentCount: 0,
                failedCount: 0,
                totalRecipients: 0,
                duration: 0
            }
        };
    }
    // Si no se encontraron destinatarios, retorna un resultado exitoso con estadísticas de cero envíos.
    // Busca el evento correspondiente si se proporcionó un eventId.
    const event = eventId ? __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$data$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["events"].find((e)=>e.id === eventId) : null;
    // Obtiene el número total de destinatarios.
    const totalRecipients = recipients.length;
    // Obtiene una instancia del cliente de Microsoft Graph.
    const graphClient = await getGraphClient();
    let sentCount = 0;
    let failedCount = 0;
    const recipientBatches = [];
    for(let i = 0; i < recipients.length; i += batchSize){
        recipientBatches.push(recipients.slice(i, i + batchSize));
    }
    // Divide la lista de destinatarios en lotes según el tamaño de lote especificado.
    // Itera sobre cada lote de destinatarios.
    for (const [index, batch] of recipientBatches.entries()){
        // Itera sobre cada contacto dentro del lote actual.
        for (const contact of batch){
            try {
                // Inicializa el cuerpo final del correo con el cuerpo HTML original.
                let finalHtmlBody = htmlBody;
                // Reemplaza el placeholder {{contact.name}} si existe el nombre del contacto.
                if (contact.name) {
                    finalHtmlBody = finalHtmlBody.replace(/{{contact.name}}/g, contact.name);
                }
                // Reemplaza el placeholder {{event.date}} si existe la fecha del evento.
                if (event) {
                    finalHtmlBody = finalHtmlBody.replace(/{{event.date}}/g, event.date);
                }
                // Limpia cualquier marcador de posición que no haya sido reemplazado.
                finalHtmlBody = finalHtmlBody.replace(/{{contact.name}}/g, '');
                finalHtmlBody = finalHtmlBody.replace(/{{event.date}}/g, '');
                const message = {
                    subject: subject,
                    body: {
                        contentType: 'HTML',
                        content: finalHtmlBody
                    },
                    toRecipients: [
                        {
                            emailAddress: {
                                address: contact.email
                            }
                        }
                    ],
                    attachments: attachment ? [
                        {
                            '@odata.type': '#microsoft.graph.fileAttachment',
                            name: attachment.filename,
                            contentType: attachment.contentType,
                            contentBytes: attachment.content
                        }
                    ] : undefined
                };
                // Envía el correo usando la función con lógica de reintentos.
                await sendEmailWithRetry(graphClient, message, GRAPH_USER_MAIL);
                sentCount++;
            // Incrementa el contador de correos enviados exitosamente.
            } catch (error) {
                failedCount++;
                const errorMessage = error?.body ? JSON.parse(error.body).error.message : error.message;
                console.error(`Error al enviar correo a ${contact.email} usando Graph:`, errorMessage);
            // Incrementa el contador de correos fallidos.
            // Loguea el error detallado al enviar el correo a un contacto específico.
            }
            if (emailDelay > 0) await delay(emailDelay);
        }
        if (index < recipientBatches.length - 1) {
            if (batchDelay > 0) await delay(batchDelay * 1000);
        // Si no es el último lote y hay un retraso de lote configurado, espera antes de procesar el siguiente lote.
        }
    }
    // Registra el tiempo de finalización.
    const endTime = Date.now();
    // Calcula la duración total del proceso de envío en segundos.
    const duration = (endTime - startTime) / 1000;
    let message = `Envío completado con Microsoft Graph. Enviados: ${sentCount}. Fallidos: ${failedCount}.`;
    if (failedCount > 0) {
        message += ' Revisa la consola del servidor para más detalles sobre los errores.';
    }
    // Retorna un objeto con el estado de éxito, un mensaje resumen y estadísticas del envío.
    return {
        success: true,
        message,
        stats: {
            sentCount,
            failedCount,
            totalRecipients,
            duration
        }
    };
}
;
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ensureServerEntryExports"])([
    sendCampaign
]);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(sendCampaign, "401372f659c5451f99035a7f116333db4ac66a7ce4", null);
}}),
"[project]/src/app/actions/send-test-email-action.ts [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
/* __next_internal_action_entry_do_not_use__ [{"406b923f738831070980d62a75596a77849741996f":"sendTestEmailAction"},"",""] */ __turbopack_context__.s({
    "sendTestEmailAction": (()=>sendTestEmailAction)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$app$2d$render$2f$encryption$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/app-render/encryption.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$isomorphic$2d$fetch$2f$fetch$2d$npm$2d$node$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/isomorphic-fetch/fetch-npm-node.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$azure$2f$identity$2f$dist$2f$esm$2f$index$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@azure/identity/dist/esm/index.js [app-rsc] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$azure$2f$identity$2f$dist$2f$esm$2f$credentials$2f$clientSecretCredential$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@azure/identity/dist/esm/credentials/clientSecretCredential.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$microsoft$2f$microsoft$2d$graph$2d$client$2f$lib$2f$es$2f$src$2f$index$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@microsoft/microsoft-graph-client/lib/es/src/index.js [app-rsc] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$microsoft$2f$microsoft$2d$graph$2d$client$2f$lib$2f$es$2f$src$2f$Client$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@microsoft/microsoft-graph-client/lib/es/src/Client.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$microsoft$2f$microsoft$2d$graph$2d$client$2f$authProviders$2f$azureTokenCredentials$2f$index$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@microsoft/microsoft-graph-client/authProviders/azureTokenCredentials/index.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$date$2d$fns$2f$format$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/date-fns/format.mjs [app-rsc] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$date$2d$fns$2f$locale$2f$es$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/date-fns/locale/es.mjs [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$data$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/data.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$permissions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/permissions.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js [app-rsc] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
async function getGraphClient() {
    const { GRAPH_CLIENT_ID, GRAPH_TENANT_ID, GRAPH_CLIENT_SECRET } = process.env;
    if (!GRAPH_CLIENT_ID || !GRAPH_TENANT_ID || !GRAPH_CLIENT_SECRET) {
        throw new Error('Faltan las variables de entorno de Microsoft Graph. Por favor, configúralas en Ajustes.');
    }
    const credential = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$azure$2f$identity$2f$dist$2f$esm$2f$credentials$2f$clientSecretCredential$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ClientSecretCredential"](GRAPH_TENANT_ID, GRAPH_CLIENT_ID, GRAPH_CLIENT_SECRET);
    const authProvider = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$microsoft$2f$microsoft$2d$graph$2d$client$2f$authProviders$2f$azureTokenCredentials$2f$index$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["TokenCredentialAuthenticationProvider"](credential, {
        scopes: [
            'https://graph.microsoft.com/.default'
        ]
    });
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$microsoft$2f$microsoft$2d$graph$2d$client$2f$lib$2f$es$2f$src$2f$Client$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["Client"].initWithMiddleware({
        authProvider
    });
}
async function sendTestEmailAction(payload) {
    const { subject, htmlBody, recipientEmail, attachment, eventId, role } = payload;
    if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$permissions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["hasPermission"])(role, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$permissions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["APP_PERMISSIONS"].SEND_CAMPAIGN)) {
        throw new Error('Acceso denegado: No tienes permiso para enviar correos de prueba.');
    }
    const { GRAPH_USER_MAIL } = process.env;
    if (!GRAPH_USER_MAIL) {
        throw new Error('Falta la variable de entorno GRAPH_USER_MAIL. Por favor, configúrala.');
    }
    const event = eventId ? __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$data$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["events"].find((e)=>e.id === eventId) : null;
    let finalHtmlBody = htmlBody;
    // Replace placeholders with test data
    finalHtmlBody = finalHtmlBody.replace(/{{contact.name}}/g, 'Usuario de Prueba');
    if (event) {
        finalHtmlBody = finalHtmlBody.replace(/{{event.date}}/g, event.date);
    } else {
        // If no event, use today's date for placeholder
        finalHtmlBody = finalHtmlBody.replace(/{{event.date}}/g, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$date$2d$fns$2f$format$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__["format"])(new Date(), 'PPP', {
            locale: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$date$2d$fns$2f$locale$2f$es$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["es"]
        }));
    }
    // Clean up any other unreplaced placeholders
    finalHtmlBody = finalHtmlBody.replace(/{{contact.name}}/g, '');
    finalHtmlBody = finalHtmlBody.replace(/{{event.date}}/g, '');
    const message = {
        subject: `[PRUEBA] ${subject}`,
        body: {
            contentType: 'HTML',
            content: finalHtmlBody
        },
        toRecipients: [
            {
                emailAddress: {
                    address: recipientEmail
                }
            }
        ],
        attachments: attachment ? [
            {
                '@odata.type': '#microsoft.graph.fileAttachment',
                name: attachment.filename,
                contentType: attachment.contentType,
                contentBytes: attachment.content
            }
        ] : undefined
    };
    try {
        const graphClient = await getGraphClient();
        await graphClient.api(`/users/${GRAPH_USER_MAIL}/sendMail`).post({
            message,
            saveToSentItems: 'true'
        });
        return {
            success: true
        };
    } catch (error) {
        const errorMessage = error?.body ? JSON.parse(error.body).error.message : error.message;
        console.error(`Error al enviar correo de prueba a ${recipientEmail} usando Graph:`, errorMessage);
        throw new Error(`No se pudo enviar el correo de prueba: ${errorMessage}`);
    }
}
;
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ensureServerEntryExports"])([
    sendTestEmailAction
]);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(sendTestEmailAction, "406b923f738831070980d62a75596a77849741996f", null);
}}),
"[externals]/perf_hooks [external] (perf_hooks, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("perf_hooks", () => require("perf_hooks"));

module.exports = mod;
}}),
"[externals]/node:perf_hooks [external] (node:perf_hooks, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:perf_hooks", () => require("node:perf_hooks"));

module.exports = mod;
}}),
"[externals]/async_hooks [external] (async_hooks, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("async_hooks", () => require("async_hooks"));

module.exports = mod;
}}),
"[externals]/require-in-the-middle [external] (require-in-the-middle, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("require-in-the-middle", () => require("require-in-the-middle"));

module.exports = mod;
}}),
"[externals]/import-in-the-middle [external] (import-in-the-middle, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("import-in-the-middle", () => require("import-in-the-middle"));

module.exports = mod;
}}),
"[externals]/http2 [external] (http2, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("http2", () => require("http2"));

module.exports = mod;
}}),
"[externals]/dns [external] (dns, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("dns", () => require("dns"));

module.exports = mod;
}}),
"[externals]/node:async_hooks [external] (node:async_hooks, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:async_hooks", () => require("node:async_hooks"));

module.exports = mod;
}}),
"[externals]/node:buffer [external] (node:buffer, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("node:buffer", () => require("node:buffer"));

module.exports = mod;
}}),
"[externals]/express [external] (express, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("express", () => require("express"));

module.exports = mod;
}}),
"[externals]/fs/promises [external] (fs/promises, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("fs/promises", () => require("fs/promises"));

module.exports = mod;
}}),
"[project]/src/ai/genkit.ts [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
/**
 * @fileoverview Configuración e inicialización de Genkit.
 * Este archivo centraliza la configuración del framework de IA Genkit,
 * especificando los plugins a utilizar (como Google AI) y el modelo
 * de lenguaje por defecto para toda la aplicación.
 */ __turbopack_context__.s({
    "ai": (()=>ai)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/genkit/lib/index.mjs [app-rsc] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$genkit$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/genkit/lib/genkit.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$genkit$2d$ai$2f$googleai$2f$lib$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@genkit-ai/googleai/lib/index.mjs [app-rsc] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$genkit$2d$ai$2f$googleai$2f$lib$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@genkit-ai/googleai/lib/index.mjs [app-rsc] (ecmascript) <locals>");
;
;
const ai = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$genkit$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["genkit"])({
    plugins: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$genkit$2d$ai$2f$googleai$2f$lib$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__["googleAI"])()
    ],
    model: 'googleai/gemini-2.0-flash'
});
}}),
"[project]/src/ai/flows/optimize-email-content.ts [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
/* __next_internal_action_entry_do_not_use__ [{"408065480e5e9c0aa0b6113915a5d301d36d690672":"optimizeEmailContent"},"",""] */ __turbopack_context__.s({
    "optimizeEmailContent": (()=>optimizeEmailContent)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$app$2d$render$2f$encryption$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/app-render/encryption.js [app-rsc] (ecmascript)");
/**
 * @fileOverview A flow that uses AI to suggest improvements for email content to avoid spam filters and increase engagement.
 *
 * - optimizeEmailContent - A function that optimizes email content using AI.
 * - OptimizeEmailContentInput - The input type for the optimizeEmailContent function.
 * - OptimizeEmailContentOutput - The return type for the optimizeEmailContent function.
 */ var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$ai$2f$genkit$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/ai/genkit.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$index$2e$mjs__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/genkit/lib/index.mjs [app-rsc] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$common$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/genkit/lib/common.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js [app-rsc] (ecmascript)");
;
;
;
;
const OptimizeEmailContentInputSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$common$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["z"].object({
    emailContent: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$common$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["z"].string().describe('The email content to be optimized.'),
    audience: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$common$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["z"].string().describe('Description of the target audience.')
});
const OptimizeEmailContentOutputSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$common$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["z"].object({
    optimizedContent: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$common$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["z"].string().describe('The optimized email content with suggestions.'),
    spamScore: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$common$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["z"].number().optional().describe('A score indicating the likelihood of being flagged as spam.'),
    engagementSuggestions: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$genkit$2f$lib$2f$common$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["z"].string().optional().describe('Suggestions to improve audience engagement.')
});
async function optimizeEmailContent(input) {
    return optimizeEmailContentFlow(input);
}
const prompt = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$ai$2f$genkit$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ai"].definePrompt({
    name: 'optimizeEmailContentPrompt',
    input: {
        schema: OptimizeEmailContentInputSchema
    },
    output: {
        schema: OptimizeEmailContentOutputSchema
    },
    prompt: `You are an AI assistant specializing in email marketing. Your goal is to help users optimize their email content to avoid spam filters and increase engagement.

  Consider the following email content and target audience:

  Email Content: {{{emailContent}}}
  Target Audience: {{{audience}}}

  Provide the optimized email content with clear suggestions on how to improve it, including specific changes to avoid spam triggers and enhance engagement. Also, provide a spam score indicating the likelihood of the email being flagged as spam (lower is better) and engagement suggestions to improve audience engagement.
  Remember to re-write the email entirely using the instructions given.
`
});
const optimizeEmailContentFlow = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$ai$2f$genkit$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ai"].defineFlow({
    name: 'optimizeEmailContentFlow',
    inputSchema: OptimizeEmailContentInputSchema,
    outputSchema: OptimizeEmailContentOutputSchema
}, async (input)=>{
    const { output } = await prompt(input);
    return output;
});
;
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ensureServerEntryExports"])([
    optimizeEmailContent
]);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(optimizeEmailContent, "408065480e5e9c0aa0b6113915a5d301d36d690672", null);
}}),
"[project]/src/app/actions/optimize-email-action.ts [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
/* __next_internal_action_entry_do_not_use__ [{"408eb00f3d55a667ab96280ee5276ee768efedb92d":"optimizeEmailContentAction"},"",""] */ __turbopack_context__.s({
    "optimizeEmailContentAction": (()=>optimizeEmailContentAction)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$app$2d$render$2f$encryption$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/app-render/encryption.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$ai$2f$flows$2f$optimize$2d$email$2d$content$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/ai/flows/optimize-email-content.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$permissions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/permissions.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js [app-rsc] (ecmascript)");
;
;
;
;
async function optimizeEmailContentAction(input) {
    const { role, ...optimizeInput } = input;
    if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$permissions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["hasPermission"])(role, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$permissions$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["APP_PERMISSIONS"].SEND_CAMPAIGN)) {
        throw new Error('Acceso denegado: No tienes permiso para optimizar contenido.');
    }
    try {
        const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$ai$2f$flows$2f$optimize$2d$email$2d$content$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["optimizeEmailContent"])(optimizeInput);
        return result;
    } catch (error) {
        console.error('Error optimizing email content:', error);
        throw new Error('No se pudo optimizar el contenido del correo electrónico.');
    }
}
;
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$validate$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["ensureServerEntryExports"])([
    optimizeEmailContentAction
]);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$server$2d$reference$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerServerReference"])(optimizeEmailContentAction, "408eb00f3d55a667ab96280ee5276ee768efedb92d", null);
}}),
"[project]/.next-internal/server/app/(main)/send/page/actions.js { ACTIONS_MODULE0 => \"[project]/src/app/actions/send-campaign-action.ts [app-rsc] (ecmascript)\", ACTIONS_MODULE1 => \"[project]/src/app/actions/send-test-email-action.ts [app-rsc] (ecmascript)\", ACTIONS_MODULE2 => \"[project]/src/app/actions/optimize-email-action.ts [app-rsc] (ecmascript)\" } [app-rsc] (server actions loader, ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$campaign$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/actions/send-campaign-action.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$test$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/actions/send-test-email-action.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$actions$2f$optimize$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/actions/optimize-email-action.ts [app-rsc] (ecmascript)");
;
;
;
}}),
"[project]/.next-internal/server/app/(main)/send/page/actions.js { ACTIONS_MODULE0 => \"[project]/src/app/actions/send-campaign-action.ts [app-rsc] (ecmascript)\", ACTIONS_MODULE1 => \"[project]/src/app/actions/send-test-email-action.ts [app-rsc] (ecmascript)\", ACTIONS_MODULE2 => \"[project]/src/app/actions/optimize-email-action.ts [app-rsc] (ecmascript)\" } [app-rsc] (server actions loader, ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$campaign$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/actions/send-campaign-action.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$test$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/actions/send-test-email-action.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$actions$2f$optimize$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/actions/optimize-email-action.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f2e$next$2d$internal$2f$server$2f$app$2f28$main$292f$send$2f$page$2f$actions$2e$js__$7b$__ACTIONS_MODULE0__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$campaign$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE1__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$test$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE2__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$optimize$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$2922$__$7d$__$5b$app$2d$rsc$5d$__$28$server__actions__loader$2c$__ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i('[project]/.next-internal/server/app/(main)/send/page/actions.js { ACTIONS_MODULE0 => "[project]/src/app/actions/send-campaign-action.ts [app-rsc] (ecmascript)", ACTIONS_MODULE1 => "[project]/src/app/actions/send-test-email-action.ts [app-rsc] (ecmascript)", ACTIONS_MODULE2 => "[project]/src/app/actions/optimize-email-action.ts [app-rsc] (ecmascript)" } [app-rsc] (server actions loader, ecmascript) <locals>');
}}),
"[project]/.next-internal/server/app/(main)/send/page/actions.js { ACTIONS_MODULE0 => \"[project]/src/app/actions/send-campaign-action.ts [app-rsc] (ecmascript)\", ACTIONS_MODULE1 => \"[project]/src/app/actions/send-test-email-action.ts [app-rsc] (ecmascript)\", ACTIONS_MODULE2 => \"[project]/src/app/actions/optimize-email-action.ts [app-rsc] (ecmascript)\" } [app-rsc] (server actions loader, ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "401372f659c5451f99035a7f116333db4ac66a7ce4": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$campaign$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["sendCampaign"]),
    "406b923f738831070980d62a75596a77849741996f": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$test$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["sendTestEmailAction"]),
    "408eb00f3d55a667ab96280ee5276ee768efedb92d": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$actions$2f$optimize$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["optimizeEmailContentAction"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$campaign$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/actions/send-campaign-action.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$test$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/actions/send-test-email-action.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$actions$2f$optimize$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/actions/optimize-email-action.ts [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f2e$next$2d$internal$2f$server$2f$app$2f28$main$292f$send$2f$page$2f$actions$2e$js__$7b$__ACTIONS_MODULE0__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$campaign$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE1__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$test$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE2__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$optimize$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$2922$__$7d$__$5b$app$2d$rsc$5d$__$28$server__actions__loader$2c$__ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i('[project]/.next-internal/server/app/(main)/send/page/actions.js { ACTIONS_MODULE0 => "[project]/src/app/actions/send-campaign-action.ts [app-rsc] (ecmascript)", ACTIONS_MODULE1 => "[project]/src/app/actions/send-test-email-action.ts [app-rsc] (ecmascript)", ACTIONS_MODULE2 => "[project]/src/app/actions/optimize-email-action.ts [app-rsc] (ecmascript)" } [app-rsc] (server actions loader, ecmascript) <locals>');
}}),
"[project]/.next-internal/server/app/(main)/send/page/actions.js { ACTIONS_MODULE0 => \"[project]/src/app/actions/send-campaign-action.ts [app-rsc] (ecmascript)\", ACTIONS_MODULE1 => \"[project]/src/app/actions/send-test-email-action.ts [app-rsc] (ecmascript)\", ACTIONS_MODULE2 => \"[project]/src/app/actions/optimize-email-action.ts [app-rsc] (ecmascript)\" } [app-rsc] (server actions loader, ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "401372f659c5451f99035a7f116333db4ac66a7ce4": (()=>__TURBOPACK__imported__module__$5b$project$5d2f2e$next$2d$internal$2f$server$2f$app$2f28$main$292f$send$2f$page$2f$actions$2e$js__$7b$__ACTIONS_MODULE0__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$campaign$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE1__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$test$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE2__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$optimize$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$2922$__$7d$__$5b$app$2d$rsc$5d$__$28$server__actions__loader$2c$__ecmascript$29$__$3c$exports$3e$__["401372f659c5451f99035a7f116333db4ac66a7ce4"]),
    "406b923f738831070980d62a75596a77849741996f": (()=>__TURBOPACK__imported__module__$5b$project$5d2f2e$next$2d$internal$2f$server$2f$app$2f28$main$292f$send$2f$page$2f$actions$2e$js__$7b$__ACTIONS_MODULE0__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$campaign$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE1__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$test$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE2__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$optimize$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$2922$__$7d$__$5b$app$2d$rsc$5d$__$28$server__actions__loader$2c$__ecmascript$29$__$3c$exports$3e$__["406b923f738831070980d62a75596a77849741996f"]),
    "408eb00f3d55a667ab96280ee5276ee768efedb92d": (()=>__TURBOPACK__imported__module__$5b$project$5d2f2e$next$2d$internal$2f$server$2f$app$2f28$main$292f$send$2f$page$2f$actions$2e$js__$7b$__ACTIONS_MODULE0__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$campaign$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE1__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$test$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE2__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$optimize$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$2922$__$7d$__$5b$app$2d$rsc$5d$__$28$server__actions__loader$2c$__ecmascript$29$__$3c$exports$3e$__["408eb00f3d55a667ab96280ee5276ee768efedb92d"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f2e$next$2d$internal$2f$server$2f$app$2f28$main$292f$send$2f$page$2f$actions$2e$js__$7b$__ACTIONS_MODULE0__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$campaign$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE1__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$test$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE2__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$optimize$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$2922$__$7d$__$5b$app$2d$rsc$5d$__$28$server__actions__loader$2c$__ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i('[project]/.next-internal/server/app/(main)/send/page/actions.js { ACTIONS_MODULE0 => "[project]/src/app/actions/send-campaign-action.ts [app-rsc] (ecmascript)", ACTIONS_MODULE1 => "[project]/src/app/actions/send-test-email-action.ts [app-rsc] (ecmascript)", ACTIONS_MODULE2 => "[project]/src/app/actions/optimize-email-action.ts [app-rsc] (ecmascript)" } [app-rsc] (server actions loader, ecmascript) <module evaluation>');
var __TURBOPACK__imported__module__$5b$project$5d2f2e$next$2d$internal$2f$server$2f$app$2f28$main$292f$send$2f$page$2f$actions$2e$js__$7b$__ACTIONS_MODULE0__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$campaign$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE1__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$send$2d$test$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$29222c$__ACTIONS_MODULE2__$3d3e$__$225b$project$5d2f$src$2f$app$2f$actions$2f$optimize$2d$email$2d$action$2e$ts__$5b$app$2d$rsc$5d$__$28$ecmascript$2922$__$7d$__$5b$app$2d$rsc$5d$__$28$server__actions__loader$2c$__ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i('[project]/.next-internal/server/app/(main)/send/page/actions.js { ACTIONS_MODULE0 => "[project]/src/app/actions/send-campaign-action.ts [app-rsc] (ecmascript)", ACTIONS_MODULE1 => "[project]/src/app/actions/send-test-email-action.ts [app-rsc] (ecmascript)", ACTIONS_MODULE2 => "[project]/src/app/actions/optimize-email-action.ts [app-rsc] (ecmascript)" } [app-rsc] (server actions loader, ecmascript) <exports>');
}}),
"[project]/src/app/favicon.ico.mjs { IMAGE => \"[project]/src/app/favicon.ico (static in ecmascript)\" } [app-rsc] (structured image object, ecmascript, Next.js server component)": ((__turbopack_context__) => {

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.n(__turbopack_context__.i("[project]/src/app/favicon.ico.mjs { IMAGE => \"[project]/src/app/favicon.ico (static in ecmascript)\" } [app-rsc] (structured image object, ecmascript)"));
}}),
"[project]/src/app/layout.tsx [app-rsc] (ecmascript, Next.js server component)": ((__turbopack_context__) => {

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.n(__turbopack_context__.i("[project]/src/app/layout.tsx [app-rsc] (ecmascript)"));
}}),
"[project]/src/app/(main)/layout.tsx [app-rsc] (ecmascript, Next.js server component)": ((__turbopack_context__) => {

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.n(__turbopack_context__.i("[project]/src/app/(main)/layout.tsx [app-rsc] (ecmascript)"));
}}),
"[project]/src/app/(main)/send/page.tsx (client reference/proxy) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>__TURBOPACK__default__export__)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2d$edge$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server-edge.js [app-rsc] (ecmascript)");
;
const __TURBOPACK__default__export__ = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2d$edge$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerClientReference"])(function() {
    throw new Error("Attempted to call the default export of [project]/src/app/(main)/send/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.");
}, "[project]/src/app/(main)/send/page.tsx <module evaluation>", "default");
}}),
"[project]/src/app/(main)/send/page.tsx (client reference/proxy)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>__TURBOPACK__default__export__)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2d$edge$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server-edge.js [app-rsc] (ecmascript)");
;
const __TURBOPACK__default__export__ = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2d$edge$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerClientReference"])(function() {
    throw new Error("Attempted to call the default export of [project]/src/app/(main)/send/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.");
}, "[project]/src/app/(main)/send/page.tsx", "default");
}}),
"[project]/src/app/(main)/send/page.tsx [app-rsc] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f28$main$292f$send$2f$page$2e$tsx__$28$client__reference$2f$proxy$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/src/app/(main)/send/page.tsx (client reference/proxy) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f28$main$292f$send$2f$page$2e$tsx__$28$client__reference$2f$proxy$29$__ = __turbopack_context__.i("[project]/src/app/(main)/send/page.tsx (client reference/proxy)");
;
__turbopack_context__.n(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f28$main$292f$send$2f$page$2e$tsx__$28$client__reference$2f$proxy$29$__);
}}),
"[project]/src/app/(main)/send/page.tsx [app-rsc] (ecmascript, Next.js server component)": ((__turbopack_context__) => {

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.n(__turbopack_context__.i("[project]/src/app/(main)/send/page.tsx [app-rsc] (ecmascript)"));
}}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__36f90a8c._.js.map